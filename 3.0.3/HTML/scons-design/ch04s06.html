<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4.6. Targets</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 3.0.3"><link rel="up" href="ch04.html" title="Chapter 4. Build Engine API"><link rel="prev" href="ch04s05.html" title="4.5. Scanner Objects"><link rel="next" href="ch04s07.html" title="4.7. Customizing output"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.6. Targets</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s05.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Build Engine API</th><td width="20%" align="right"> <a accesskey="n" href="ch04s07.html">Next</a></td></tr></table><hr></div><div class="section" title="4.6. Targets"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect-targets"></a>4.6. Targets</h2></div></div></div><p>

  The methods in the build engine API described so far merely
  establish associations that describe file dependencies, how a
  file should be scanned, etc.  Since the real point is to actually
  <span class="emphasis"><em>build</em></span> files, <span class="application">SCons</span> also has methods that
  actually direct the build engine to build, or otherwise manipulate,
  target files.

 </p><div class="section" title="4.6.1. Building targets"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436203776"></a>4.6.1. Building targets</h3></div></div></div><p>

   One or more targets may be built as follows:

  </p><pre class="programlisting">
	env.Build(target = ['foo', 'bar'])
	</pre><p>

   Note that specifying a directory (or other collective object) will
   cause all subsidiary/dependent objects to be built as well:

  </p><pre class="programlisting">
	env.Build(target = '.')

	env.Build(target = 'builddir')
	</pre><p>

   By default, <span class="application">SCons</span> explicitly removes a target file before
   invoking the underlying function or command(s) to build it.

  </p></div><div class="section" title="4.6.2. Removing targets"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436200128"></a>4.6.2. Removing targets</h3></div></div></div><p>

   A "cleanup" operation of removing generated (target) files is
   performed as follows:

  </p><pre class="programlisting">
	env.Clean(target = ['foo', 'bar'])
	</pre><p>

   Like the <code class="function">Build</code> method, the <code class="function">Clean</code> method may be passed a
   directory or other collective object, in which case the subsidiary
   target objects under the directory will be removed:

  </p><pre class="programlisting">
	env.Clean(target = '.')

	env.Clean(target = 'builddir')
	</pre><p>

   (The directories themselves are not removed.)

  </p></div><div class="section" title="4.6.3. Suppressing cleanup removal of build-targets"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436196032"></a>4.6.3. Suppressing cleanup removal of build-targets</h3></div></div></div><p>
    
    By default, <span class="application">SCons</span> explicitly removes all build-targets
    when invoked to perform "cleanup". Files that should not be 
    removed during "cleanup" can be specified via the
    <code class="function">NoClean</code> method:
    
  </p><pre class="programlisting">
env.Library(target = 'libfoo.a', source = ['aaa.c', 'bbb.c', 'ccc.c'])
env.NoClean('libfoo.a')
  </pre><p>
    
    The NoClean operation has precedence over the Clean operation.
    A target that is specified as both Clean and NoClean, will not 
    be removed during a clean.
    
    In the following example, target 'foo' will not be removed 
    during "cleanup":
    
    </p><pre class="programlisting">
env.Clean(target = 'foo')
env.NoClean('foo')
    </pre><p>
    
    
  </p></div><div class="section" title="4.6.4. Suppressing build-target removal"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436192032"></a>4.6.4. Suppressing build-target removal</h3></div></div></div><p>

   As mentioned, by default, <span class="application">SCons</span> explicitly removes a target
   file before invoking the underlying function or command(s) to build
   it.  Files that should not be removed before rebuilding can be
   specified via the <code class="function">Precious</code> method:

  </p><pre class="programlisting">
	env.Library(target = 'libfoo.a', source = ['aaa.c', 'bbb.c', 'ccc.c'])
	env.Precious('libfoo.a')
	</pre></div><div class="section" title="4.6.5. Default targets"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436189216"></a>4.6.5. Default targets</h3></div></div></div><p>

   The user may specify default targets that will be built if there are no
   targets supplied on the command line:

  </p><pre class="programlisting">
	env.Default('install', 'src')
	</pre><p>

   Multiple calls to the <code class="function">Default</code> method (typically one per <code class="filename">SConscript</code>
   file) append their arguments to the list of default targets.

  </p></div><div class="section" title="4.6.6. File installation"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436186064"></a>4.6.6. File installation</h3></div></div></div><p>

   Files may be installed in a destination directory:

  </p><pre class="programlisting">
	env.Install('/usr/bin', 'program1', 'program2')
	</pre><p>

   Files may be renamed on installation:

  </p><pre class="programlisting">
	env.InstallAs('/usr/bin/xyzzy', 'xyzzy.in')
	</pre><p>

   Multiple files may be renamed on installation by specifying
   equal-length lists of target and source files:

  </p><pre class="programlisting">
	env.InstallAs(['/usr/bin/foo', '/usr/bin/bar'],
	                ['foo.in', 'bar.in'])
	</pre></div><div class="section" title="4.6.7. Target aliases"><div class="titlepage"><div><div><h3 class="title"><a name="idm140654436182448"></a>4.6.7. Target aliases</h3></div></div></div><p>

   In order to provide convenient "shortcut" target names that expand to
   a specified list of targets, aliases may be established:

  </p><pre class="programlisting">
	env.Alias(alias = 'install',
	          targets = ['/sbin', '/usr/lib', '/usr/share/man'])
	</pre><p>

   In this example, specifying a target of <code class="literal">install</code>
   will cause all the files in the associated directories to be built
   (that is, installed).

  </p><p>

   An <code class="function">Alias</code> may include one or more other <code class="function">Aliases</code> in its list:

  </p><pre class="programlisting">
	env.Alias(alias = 'libraries', targets = ['lib'])
	env.Alias(alias = 'programs', targets = ['libraries', 'src'])
	</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s05.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.5. <code class="classname">Scanner</code> Objects </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4.7. Customizing output</td></tr></table></div></body></html>
