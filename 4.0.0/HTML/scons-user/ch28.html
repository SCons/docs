<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 28. Using SCons with other build tools</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 4.0.0"><link rel="up" href="index.html" title="SCons 4.0.0"><link rel="prev" href="ch27s07.html" title="27.7. Virtual environments (virtualenvs)"><link rel="next" href="ch29.html" title="Chapter 29. Troubleshooting"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 28. Using SCons with other build tools</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch27s07.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch29.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 28. Using SCons with other build tools"><div class="titlepage"><div><div><h2 class="title"><a name="chap-external"></a>Chapter 28. Using SCons with other build tools</h2></div></div></div><p>

  Sometimes a project needs to interact with other projects
  in various ways.  For example, many open source projects
  make use of components from other open source projects,
  and want to use those in their released form, not recode
  their builds into <span class="application">SCons</span>.  As another example, sometimes
  the flexibility and power of <span class="application">SCons</span> is useful for managing the
  overall project, but developers might like faster incremental
  builds when making small changes by using a different tool.

  </p><p>

  This chapter shows some techniques for interacting with other
  projects and tools effectively from within <span class="application">SCons</span>.

  </p><div class="section" title="28.1. Creating a Compilation Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp140522969464408"></a>28.1. Creating a Compilation Database</h2></div></div></div><p>

    Tooling which wants to perform analysis and modification 
    of source code often needs to know not only the source code
    itself, but also how it will be compiled, as the compilation line
    affects the behavior of macros, includes, etc. <span class="application">SCons</span> has a
    record of this information once it has run, in the form of
    Actions associated with the sources, and can emit this information
    so tools can use it.

    </p><p>

    The Clang project has defined a <em class="firstterm">JSON Compilation Database</em>.
    This database is in common use as input into Clang tools
    and many IDEs and editors as well.
    See
    <a class="ulink" href="https://clang.llvm.org/docs/JSONCompilationDatabase.html" target="_top">
      <em class="citetitle">JSON Compilation Database Format Specification</em>
    </a>
    for complete information. <span class="application">SCons</span> can emit a 
    compilation database in this format
    by enabling the <a class="link" href="apc.html#t-compilation_db"><code class="literal">compilation_db</code></a> tool
    and calling the <a class="link" href="apb.html#b-CompilationDatabase"><code class="function">CompilationDatabase</code></a> builder
    (available since 4.0).

    </p><p>

    The compilation database can be populated with
    source and target files either with paths relative
    to the top of the build, or using absolute paths.
    This is controlled by
    <code class="envar">COMPILATIONDB_USE_ABSPATH=(True|False)</code>
    which defaults to <code class="constant">False</code>.

    </p><p>

    Example of absolute paths for target and source:

    </p><pre class="programlisting">
env = Environment(COMPILATIONDB_USE_ABSPATH=True)
env.Tool('compilation_db')
env.CompilationDatabase('compile_commands.json')
    </pre><pre class="programlisting">
[
    {
        "command": "gcc -o test_main.o -c test_main.c",
        "directory": "/home/user/sandbox",
        "file": "/home/user/sandbox/test_main.c",
        "target": "/home/user/sandbox/test_main.o"
    }
]
    </pre><p>

    Example of relative paths for target and source:

    </p><pre class="programlisting">
env = Environment()
env.Tool('compilation_db')
env.CompilationDatabase('compile_commands.json')
    </pre><pre class="programlisting">
[
    {
        "command": "gcc -o test_main.o -c test_main.c",
        "directory": "/home/user/sandbox",
        "file": "test_main.c",
        "target": "test_main.o"
    }
]
    </pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch27s07.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch29.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">27.7. Virtual environments (virtualenvs) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 29. Troubleshooting</td></tr></table></div></body></html>
