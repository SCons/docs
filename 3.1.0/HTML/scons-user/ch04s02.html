<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>4.2. Linking with Libraries</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 3.1.0"><link rel="up" href="ch04.html" title="Chapter 4. Building and Linking with Libraries"><link rel="prev" href="ch04.html" title="Chapter 4. Building and Linking with Libraries"><link rel="next" href="ch04s03.html" title="4.3. Finding Libraries: the $LIBPATH Construction Variable"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.2. Linking with Libraries</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Building and Linking with Libraries</th><td width="20%" align="right"> <a accesskey="n" href="ch04s03.html">Next</a></td></tr></table><hr></div><div class="section" title="4.2. Linking with Libraries"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm662"></a>4.2. Linking with Libraries</h2></div></div></div><p>

    Usually, you build a library
    because you want to link it with one or more programs.
    You link libraries with a program by specifying
    the libraries in the <a class="link" href="apa.html#cv-LIBS"><code class="envar">$LIBS</code></a> construction variable,
    and by specifying the directory in which
    the library will be found in the 
    <a class="link" href="apa.html#cv-LIBPATH"><code class="envar">$LIBPATH</code></a> construction variable:

    

    </p><pre class="programlisting">
Library('foo', ['f1.c', 'f2.c', 'f3.c'])
Program('prog.c', LIBS=['foo', 'bar'], LIBPATH='.')
      </pre><p>

    Notice, of course, that you don't need to specify a library
    prefix (like <code class="literal">lib</code>)
    or suffix (like <code class="literal">.a</code> or <code class="literal">.lib</code>).
    <span class="application">SCons</span> uses the correct prefix or suffix for the current system.

    </p><p>

    On a POSIX or Linux system,
    a build of the above example would look like:

    </p><pre class="screen">% <strong class="userinput"><code>scons -Q</code></strong>
cc -o f1.o -c f1.c
cc -o f2.o -c f2.c
cc -o f3.o -c f3.c
ar rc libfoo.a f1.o f2.o f3.o
ranlib libfoo.a
cc -o prog.o -c prog.c
cc -o prog prog.o -L. -lfoo -lbar
</pre><p>

    On a Windows system,
    a build of the above example would look like:

    </p><pre class="screen">C:\&gt;<strong class="userinput"><code>scons -Q</code></strong>
cl /Fof1.obj /c f1.c /nologo
cl /Fof2.obj /c f2.c /nologo
cl /Fof3.obj /c f3.c /nologo
lib /nologo /OUT:foo.lib f1.obj f2.obj f3.obj
cl /Foprog.obj /c prog.c /nologo
link /nologo /OUT:prog.exe /LIBPATH:. foo.lib bar.lib prog.obj
embedManifestExeCheck(target, source, env)
</pre><p>

    As usual, notice that <span class="application">SCons</span> has taken care
    of constructing the correct command lines
    to link with the specified library on each system.

    </p><p>

    Note also that,
    if you only have a single library to link with,
    you can specify the library name in single string,
    instead of a Python list,
    so that:

    </p><pre class="programlisting">
Program('prog.c', LIBS='foo', LIBPATH='.')
    </pre><p>

    is equivalent to:

    </p><pre class="programlisting">
Program('prog.c', LIBS=['foo'], LIBPATH='.')
    </pre><p>

    This is similar to the way that <span class="application">SCons</span>
    handles either a string or a list to
    specify a single source file.

    </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 4. Building and Linking with Libraries </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4.3. Finding Libraries:  the <code class="envar">$LIBPATH</code> Construction Variable</td></tr></table></div></body></html>
