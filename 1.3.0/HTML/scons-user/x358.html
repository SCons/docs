<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>The SConstruct File</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="SCons User Guide 1.3.0"
HREF="index.html"><LINK
REL="UP"
TITLE="Simple Builds"
HREF="c261.html"><LINK
REL="PREVIOUS"
TITLE="Cleaning Up After a Build"
HREF="x338.html"><LINK
REL="NEXT"
TITLE="Making the SCons Output Less Verbose"
HREF="x430.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 1.3.0</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x338.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Simple Builds</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x430.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN358"
>2.5. The <TT
CLASS="filename"
>SConstruct</TT
> File</A
></H1
><P
>&#13;
   If you're used to build systems like <SPAN
CLASS="application"
>Make</SPAN
>
   you've already figured out that the <TT
CLASS="filename"
>SConstruct</TT
> file
   is the <SPAN
CLASS="application"
>SCons</SPAN
> equivalent of a <TT
CLASS="filename"
>Makefile</TT
>.
   That is, the <TT
CLASS="filename"
>SConstruct</TT
> file is the input file
   that <SPAN
CLASS="application"
>SCons</SPAN
> reads to control the build.

   </P
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN368"
>2.5.1. <TT
CLASS="filename"
>SConstruct</TT
> Files Are Python Scripts</A
></H2
><P
>&#13;
     There is, however, an important difference between
     an <TT
CLASS="filename"
>SConstruct</TT
> file and a <TT
CLASS="filename"
>Makefile</TT
>:
     the <TT
CLASS="filename"
>SConstruct</TT
> file is actually a Python script.
     If you're not already familiar with Python, don't worry.
     This User's Guide will introduce you step-by-step
     to the relatively small amount of Python you'll
     need to know to be able to use <SPAN
CLASS="application"
>SCons</SPAN
> effectively.
     And Python is very easy to learn.

     </P
><P
>&#13;
     One aspect of using Python as the
     scripting language is that you can put comments
     in your <TT
CLASS="filename"
>SConstruct</TT
> file using Python's commenting convention;
     that is, everything between a '#' and the end of the line
     will be ignored:

     </P
><PRE
CLASS="programlisting"
>&#13;        # Arrange to build the "hello" program.
        Program('hello.c')    # "hello.c" is the source file.
     </PRE
><P
>&#13;
     You'll see throughout the remainder of this Guide
     that being able to use the power of a
     real scripting language
     can greatly simplify the solutions
     to complex requirements of real-world builds.

     </P
></DIV
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="AEN380"
>2.5.2. <SPAN
CLASS="application"
>SCons</SPAN
> Functions Are Order-Independent</A
></H2
><P
>&#13;
     One important way in which the <TT
CLASS="filename"
>SConstruct</TT
>
     file is not exactly like a normal Python script,
     and is more like a <TT
CLASS="filename"
>Makefile</TT
>,
     is that the order in which
     the <SPAN
CLASS="application"
>SCons</SPAN
> functions are called in
     the <TT
CLASS="filename"
>SConstruct</TT
> file
     does <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>not</I
></SPAN
>
     affect the order in which <SPAN
CLASS="application"
>SCons</SPAN
>
     actually builds the programs and object files
     you want it to build.<A
NAME="AEN390"
HREF="#FTN.AEN390"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>
     In other words, when you call the <A
HREF="a8465.html#b-Program"
><CODE
CLASS="function"
>Program</CODE
></A
> builder
     (or any other builder method),
     you're not telling <SPAN
CLASS="application"
>SCons</SPAN
> to build
     the program at the instant the builder method is called.
     Instead, you're telling <SPAN
CLASS="application"
>SCons</SPAN
> to build the program
     that you want, for example,
     a program built from a file named <TT
CLASS="filename"
>hello.c</TT
>,
     and it's up to <SPAN
CLASS="application"
>SCons</SPAN
> to build that program
     (and any other files) whenever it's necessary.
     (We'll learn more about how
     <SPAN
CLASS="application"
>SCons</SPAN
> decides when building or rebuilding a file
     is necessary in <A
HREF="c809.html"
>Chapter 6</A
>, below.)
 
     </P
><P
>&#13;
     <SPAN
CLASS="application"
>SCons</SPAN
> reflects this distinction between
     <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>calling a builder method like</I
></SPAN
> <CODE
CLASS="function"
>Program</CODE
>
     and <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>actually building the program</I
></SPAN
>
     by printing the status messages that indicate
     when it's "just reading" the <TT
CLASS="filename"
>SConstruct</TT
> file,
     and when it's actually building the target files.
     This is to make it clear when <SPAN
CLASS="application"
>SCons</SPAN
> is
     executing the Python statements that make up the <TT
CLASS="filename"
>SConstruct</TT
> file,
     and when <SPAN
CLASS="application"
>SCons</SPAN
> is actually executing the
     commands or other actions to
     build the necessary files.

     </P
><P
>&#13;
     Let's clarify this with an example.
     Python has a <TT
CLASS="literal"
>print</TT
> statement that
     prints a string of characters to the screen.
     If we put <TT
CLASS="literal"
>print</TT
> statements around
     our calls to the <CODE
CLASS="function"
>Program</CODE
> builder method:

     </P
><PRE
CLASS="programlisting"
>&#13;       print "Calling Program('hello.c')"
       Program('hello.c')
       print "Calling Program('goodbye.c')"
       Program('goodbye.c')
       print "Finished calling Program()"
     </PRE
><P
>&#13;
     Then when we execute <SPAN
CLASS="application"
>SCons</SPAN
>,
     we see the output from the <TT
CLASS="literal"
>print</TT
>
     statements in between the messages about
     reading the <TT
CLASS="filename"
>SConscript</TT
> files,
     indicating that that is when the
     Python statements are being executed:

     </P
><PRE
CLASS="screen"
>&#13;       % <KBD
CLASS="userinput"
>scons</KBD
>
       scons: Reading SConscript files ...
       Calling Program('hello.c')
       Calling Program('goodbye.c')
       Finished calling Program()
       scons: done reading SConscript files.
       scons: Building targets ...
       cc -o goodbye.o -c goodbye.c
       cc -o goodbye goodbye.o
       cc -o hello.o -c hello.c
       cc -o hello hello.o
       scons: done building targets.
     </PRE
><P
>&#13;
     Notice also that <SPAN
CLASS="application"
>SCons</SPAN
> built the <TT
CLASS="filename"
>goodbye</TT
> program first,
     even though the "reading <TT
CLASS="filename"
>SConscript</TT
>" output
     shows that we called <TT
CLASS="literal"
>Program('hello.c')</TT
>
     first in the <TT
CLASS="filename"
>SConstruct</TT
> file.

     </P
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN390"
HREF="x358.html#AEN390"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>In programming parlance,
     the <TT
CLASS="filename"
>SConstruct</TT
> file is
     <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>declarative</I
></SPAN
>,
     meaning you tell <SPAN
CLASS="application"
>SCons</SPAN
> what you want done
     and let it figure out the order in which to do it,
     rather than strictly <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>imperative</I
></SPAN
>,
     where you specify explicitly the order in
     which to do things.
     </P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x338.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x430.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Cleaning Up After a Build</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c261.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Making the <SPAN
CLASS="application"
>SCons</SPAN
> Output Less Verbose</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>