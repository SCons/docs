<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>14.2. Path Names Are Relative to the SConscript Directory</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 4.10.0"><link rel="up" href="ch14.html" title="Chapter 14. Hierarchical Builds"><link rel="prev" href="ch14.html" title="Chapter 14. Hierarchical Builds"><link rel="next" href="ch14s03.html" title="14.3. Top-Relative Path Names in Subsidiary SConscript Files"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.2. Path Names Are Relative to the <code class="filename">SConscript</code> Directory</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch14.html">Prev</a> </td><th width="60%" align="center">Chapter 14. Hierarchical Builds</th><td width="20%" align="right"> <a accesskey="n" href="ch14s03.html">Next</a></td></tr></table><hr></div><div class="section" title="14.2. Path Names Are Relative to the SConscript Directory"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect-sconscript-relative-paths"></a>14.2. Path Names Are Relative to the <code class="filename">SConscript</code> Directory</h2></div></div></div><p>

    Subsidiary <code class="filename">SConscript</code> files make it easy to create a build
    hierarchy because all of the file and directory names
    in a subsidiary <code class="filename">SConscript</code> files are interpreted
    relative to the directory in which that <code class="filename">SConscript</code> file lives.
    Typically, this allows the <code class="filename">SConscript</code> file containing the
    instructions to build a target file
    to live in the same directory as the source files
    from which the target will be built,
    making it easy to update how the software is built
    whenever files are added or deleted
    (or other changes are made).
    It also tends to keep scripts more readable as they don't
    need to be filled with complex paths.

    </p><p>

    For example, suppose we want to build two programs
    <code class="filename">prog1</code> and <code class="filename">prog2</code> in two separate directories
    with the same names as the programs.
    One typical way to do this would be
    with a top-level <code class="filename">SConstruct</code> file like this:

    </p><pre class="programlisting">
SConscript(['prog1/SConscript', 'prog2/SConscript'])
      </pre><p>

    And subsidiary <code class="filename">SConscript</code> files that look like this:

    </p><pre class="programlisting">
env = Environment()
env.Program('prog1', ['main.c', 'foo1.c', 'foo2.c'])
      
</pre><p>

    And this:

    </p><pre class="programlisting">
env = Environment()
env.Program('prog2', ['main.c', 'bar1.c', 'bar2.c'])
      
</pre><p>

    Then, when we run <span class="application">SCons</span> in the top-level directory,
    our build looks like:

    </p><pre class="screen">% <strong class="userinput"><code>scons -Q</code></strong>
cc -o prog1/foo1.o -c prog1/foo1.c
cc -o prog1/foo2.o -c prog1/foo2.c
cc -o prog1/main.o -c prog1/main.c
cc -o prog1/prog1 prog1/main.o prog1/foo1.o prog1/foo2.o
cc -o prog2/bar1.o -c prog2/bar1.c
cc -o prog2/bar2.o -c prog2/bar2.c
cc -o prog2/main.o -c prog2/main.c
cc -o prog2/prog2 prog2/main.o prog2/bar1.o prog2/bar2.o
</pre><p>

    Notice the following:

    First, you can have files with the same names
    in multiple directories, like <code class="filename">main.c</code>
    in the above example.

    Second, when building,
    <span class="application">SCons</span> stays in the top-level directory
    (where the <code class="filename">SConstruct</code> file lives)
    and issues commands that use the path names
    from the top-level directory to the
    target and source files within the hierarchy.
    This works because <span class="application">SCons</span> reads all the SConscript files
    in one pass, interpreting each in its local context,
    building up a tree of information, before starting to
    execute the needed builds in a second pass.
    This is quite different from some other build tools
    which implement a hierarchical build by recursing.

    </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch14.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch14.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch14s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 14. Hierarchical Builds </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 14.3. Top-Relative Path Names in Subsidiary <code class="filename">SConscript</code> Files</td></tr></table></div></body></html>
