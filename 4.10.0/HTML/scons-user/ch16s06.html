<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>16.6. Guaranteeing local copies of files</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 4.10.0"><link rel="up" href="ch16.html" title="Chapter 16. Building From Code Repositories"><link rel="prev" href="ch16s05.html" title="16.5. Finding derived files in repositories"><link rel="next" href="ch16s07.html" title="16.7. Using Repository to separate source and build."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">16.6. Guaranteeing local copies of files</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch16s05.html">Prev</a> </td><th width="60%" align="center">Chapter 16. Building From Code Repositories</th><td width="20%" align="right"> <a accesskey="n" href="ch16s07.html">Next</a></td></tr></table><hr></div><div class="section" title="16.6. Guaranteeing local copies of files"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect-repository-local-copy"></a>16.6. Guaranteeing local copies of files</h2></div></div></div><p>

    If the repository tree contains the complete results of a build,
    and you try to build from the repository
    without any files in our local tree,
    something moderately surprising happens:

    </p><pre class="screen">
% <strong class="userinput"><code>mkdir $HOME/build2</code></strong>
% <strong class="userinput"><code>cd $HOME/build2</code></strong>
% <strong class="userinput"><code>scons -Q -Y /usr/all/repository hello</code></strong>
scons: `hello' is up-to-date.
    </pre><p>

    Why does <span class="application">SCons</span> say that the <code class="filename">hello</code> program
    is up-to-date when there is no <code class="filename">hello</code> program
    in the local build directory?
    Because the repository contains the <code class="filename">hello</code> program,
    and <span class="application">SCons</span> correctly determines that nothing
    needs to be done to rebuild that
    up-to-date copy of the file.

    </p><p>

    There are, however, times when you want to ensure that a
    local copy of a file always exists.
    For example, if you are packaging the result of the build,
    all the files used in the package need to be present locally,
    and the packaging tool is unlikely to know anything about
    <span class="application">SCons</span> repositories. Similarly, if you build a unit test
    program, and then expect to run after the build,
    it doesn't help if the test program is somewhere else
    and wasn't rebuilt into the local directory.
    In these cases, you can tell
    <span class="application">SCons</span> to make a copy of any up-to-date repository
    file in the local build directory,
    use the <code class="function">Local</code> function:

    </p><pre class="programlisting">
env = Environment()
hello = env.Program('hello.c')
Local(hello)
      </pre><p>

    Now, if you run the same command,
    <span class="application">SCons</span> will make a local copy of the program
    from the repository copy,
    and tell you that it is doing so:

    </p><pre class="screen">
% <strong class="userinput"><code>scons -Y /usr/all/repository hello</code></strong>
Local copy of hello from /usr/all/repository/hello
scons: `hello' is up-to-date.
    </pre><p>

    (Notice that, because the act of making the local copy
    is not considered a "build" of the <code class="filename">hello</code> file,
    <span class="application">SCons</span> still reports that it is up-to-date.)

    </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch16s05.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch16.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch16s07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">16.5. Finding derived files in repositories </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 16.7. Using Repository to separate source and build.</td></tr></table></div></body></html>
