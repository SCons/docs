
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SCons.Node &#8212; SCons 4.10.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=e28746fb"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/SCons/Node';</script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../">
  
  
  
  
  
  
    <p class="title logo__title">SCons 4.10.0 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../SCons/">SCons package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.compat/">SCons.compat package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Node/">SCons.Node package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Platform/">SCons.Platform package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Scanner/">SCons.Scanner package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Script/">SCons.Script package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Taskmaster/">SCons.Taskmaster package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Tool/">SCons.Tool package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Util/">SCons.Util package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../SCons.Variables/">SCons.Variables package</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for SCons.Node</h1><div class="highlight"><pre>
<span></span><span class="c1"># MIT License</span>
<span class="c1">#</span>
<span class="c1"># Copyright The SCons Foundation</span>
<span class="c1">#</span>
<span class="c1"># Permission is hereby granted, free of charge, to any person obtaining</span>
<span class="c1"># a copy of this software and associated documentation files (the</span>
<span class="c1"># &quot;Software&quot;), to deal in the Software without restriction, including</span>
<span class="c1"># without limitation the rights to use, copy, modify, merge, publish,</span>
<span class="c1"># distribute, sublicense, and/or sell copies of the Software, and to</span>
<span class="c1"># permit persons to whom the Software is furnished to do so, subject to</span>
<span class="c1"># the following conditions:</span>
<span class="c1">#</span>
<span class="c1"># The above copyright notice and this permission notice shall be included</span>
<span class="c1"># in all copies or substantial portions of the Software.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY</span>
<span class="c1"># KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE</span>
<span class="c1"># WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<span class="c1"># NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</span>
<span class="c1"># LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
<span class="c1"># OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</span>
<span class="c1"># WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>

<span class="sd">&quot;&quot;&quot;The Node package for the SCons software construction utility.</span>

<span class="sd">This is, in many ways, the heart of SCons.</span>

<span class="sd">A Node is where we encapsulate all of the dependency information about</span>
<span class="sd">any thing that SCons can build, or about any thing which SCons can use</span>
<span class="sd">to build some other thing.  The canonical &quot;thing,&quot; of course, is a file,</span>
<span class="sd">but a Node can also represent something remote (like a web page) or</span>
<span class="sd">something completely abstract (like an Alias).</span>

<span class="sd">Each specific type of &quot;thing&quot; is specifically represented by a subclass</span>
<span class="sd">of the Node base class:  Node.FS.File for files, Node.Alias for aliases,</span>
<span class="sd">etc.  Dependency information is kept here in the base class, and</span>
<span class="sd">information specific to files/aliases/etc. is in the subclass.  The</span>
<span class="sd">goal, if we&#39;ve done this correctly, is that any type of &quot;thing&quot; should</span>
<span class="sd">be able to depend on any other type of &quot;thing.&quot;</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span><span class="p">,</span> <span class="n">zip_longest</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">import</span> <span class="nn">SCons.Debug</span>
<span class="kn">import</span> <span class="nn">SCons.Executor</span>
<span class="kn">import</span> <span class="nn">SCons.Memoize</span>
<span class="kn">from</span> <span class="nn">SCons.compat</span> <span class="kn">import</span> <span class="n">NoSlotsPyPy</span>
<span class="kn">from</span> <span class="nn">SCons.Debug</span> <span class="kn">import</span> <span class="n">logInstanceCreation</span><span class="p">,</span> <span class="n">Trace</span>
<span class="kn">from</span> <span class="nn">SCons.Executor</span> <span class="kn">import</span> <span class="n">Executor</span>
<span class="kn">from</span> <span class="nn">SCons.Util</span> <span class="kn">import</span> <span class="n">hash_signature</span><span class="p">,</span> <span class="n">is_List</span><span class="p">,</span> <span class="n">UniqueList</span><span class="p">,</span> <span class="n">render_tree</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">SCons.Builder</span> <span class="kn">import</span> <span class="n">BuilderBase</span>
    <span class="kn">from</span> <span class="nn">SCons.Environment</span> <span class="kn">import</span> <span class="n">Base</span> <span class="k">as</span> <span class="n">Environment</span>
    <span class="kn">from</span> <span class="nn">SCons.Scanner</span> <span class="kn">import</span> <span class="n">ScannerBase</span>
    <span class="kn">from</span> <span class="nn">SCons.SConsign</span> <span class="kn">import</span> <span class="n">SConsignEntry</span>

<span class="n">print_duplicate</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="classname">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.classname">[docs]</a>
<span class="k">def</span> <span class="nf">classname</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>


<span class="c1"># Set to false if we&#39;re doing a dry run. There&#39;s more than one of these</span>
<span class="c1"># little treats</span>
<span class="n">do_store_info</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Node states</span>
<span class="c1">#</span>
<span class="c1"># These are in &quot;priority&quot; order, so that the maximum value for any</span>
<span class="c1"># child/dependency of a node represents the state of that node if</span>
<span class="c1"># it has no builder of its own.  The canonical example is a file</span>
<span class="c1"># system directory, which is only up to date if all of its children</span>
<span class="c1"># were up to date.</span>
<span class="n">no_state</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">pending</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">executing</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">up_to_date</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">executed</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">failed</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">StateString</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span> <span class="p">:</span> <span class="s2">&quot;no_state&quot;</span><span class="p">,</span>
    <span class="mi">1</span> <span class="p">:</span> <span class="s2">&quot;pending&quot;</span><span class="p">,</span>
    <span class="mi">2</span> <span class="p">:</span> <span class="s2">&quot;executing&quot;</span><span class="p">,</span>
    <span class="mi">3</span> <span class="p">:</span> <span class="s2">&quot;up_to_date&quot;</span><span class="p">,</span>
    <span class="mi">4</span> <span class="p">:</span> <span class="s2">&quot;executed&quot;</span><span class="p">,</span>
    <span class="mi">5</span> <span class="p">:</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># controls whether implicit dependencies are cached:</span>
<span class="n">implicit_cache</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># controls whether implicit dep changes are ignored:</span>
<span class="n">implicit_deps_unchanged</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># controls whether the cached implicit deps are ignored:</span>
<span class="n">implicit_deps_changed</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># A variable that can be set to an interface-specific function be called</span>
<span class="c1"># to annotate a Node with information about its creation.</span>
<div class="viewcode-block" id="do_nothing_node">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.do_nothing_node">[docs]</a>
<span class="k">def</span> <span class="nf">do_nothing_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="k">pass</span></div>


<span class="n">Annotate</span> <span class="o">=</span> <span class="n">do_nothing_node</span>

<span class="c1"># global set for recording all processed SContruct/SConscript nodes</span>
<span class="n">SConscriptNodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<span class="c1"># Gets set to &#39;True&#39; if we&#39;re running in interactive mode. Is</span>
<span class="c1"># currently used to release parts of a target&#39;s info during</span>
<span class="c1"># clean builds and update runs (see release_target_info).</span>
<span class="n">interactive</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="is_derived_none">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.is_derived_none">[docs]</a>
<span class="k">def</span> <span class="nf">is_derived_none</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="is_derived_node">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.is_derived_node">[docs]</a>
<span class="k">def</span> <span class="nf">is_derived_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns true if this node is derived (i.e. built).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">has_builder</span><span class="p">()</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">side_effect</span></div>


<span class="n">_is_derived_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">is_derived_none</span><span class="p">,</span>
                   <span class="mi">1</span> <span class="p">:</span> <span class="n">is_derived_node</span><span class="p">}</span>

<div class="viewcode-block" id="exists_none">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.exists_none">[docs]</a>
<span class="k">def</span> <span class="nf">exists_none</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="exists_always">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.exists_always">[docs]</a>
<span class="k">def</span> <span class="nf">exists_always</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="exists_base">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.exists_base">[docs]</a>
<span class="k">def</span> <span class="nf">exists_base</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="exists_entry">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.exists_entry">[docs]</a>
<span class="k">def</span> <span class="nf">exists_entry</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return if the Entry exists.  Check the file system to see</span>
<span class="sd">    what we should turn into first.  Assume a file if there&#39;s no</span>
<span class="sd">    directory.&quot;&quot;&quot;</span>
    <span class="n">node</span><span class="o">.</span><span class="n">disambiguate</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_exists_map</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">_func_exists</span><span class="p">](</span><span class="n">node</span><span class="p">)</span></div>



<div class="viewcode-block" id="exists_file">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.exists_file">[docs]</a>
<span class="k">def</span> <span class="nf">exists_file</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># Duplicate from source path if we are set up to do this.</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">duplicate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">is_derived</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">linked</span><span class="p">:</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">srcnode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">node</span><span class="p">:</span>
            <span class="c1"># At this point, src is meant to be copied in a variant directory.</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">rfile</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">get_abspath</span><span class="p">()</span> <span class="o">!=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_abspath</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">src</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">do_duplicate</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
                    <span class="c1"># Can&#39;t return 1 here because the duplication might</span>
                    <span class="c1"># not actually occur if the -n option is being used.</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># The source file does not exist.  Make sure no old</span>
                    <span class="c1"># copy remains in the variant directory.</span>
                    <span class="k">if</span> <span class="n">print_duplicate</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dup: no src for </span><span class="si">%s</span><span class="s2">, unlinking old variant copy&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">exists_base</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">islink</span><span class="p">():</span>
                        <span class="n">node</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">get_internal_path</span><span class="p">())</span>
                    <span class="c1"># Return None explicitly because the Base.exists() call</span>
                    <span class="c1"># above will have cached its value if the file existed.</span>
                    <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">exists_base</span><span class="p">(</span><span class="n">node</span><span class="p">)</span></div>


<span class="n">_exists_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">exists_none</span><span class="p">,</span>
               <span class="mi">1</span> <span class="p">:</span> <span class="n">exists_always</span><span class="p">,</span>
               <span class="mi">2</span> <span class="p">:</span> <span class="n">exists_base</span><span class="p">,</span>
               <span class="mi">3</span> <span class="p">:</span> <span class="n">exists_entry</span><span class="p">,</span>
               <span class="mi">4</span> <span class="p">:</span> <span class="n">exists_file</span><span class="p">}</span>


<div class="viewcode-block" id="rexists_none">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.rexists_none">[docs]</a>
<span class="k">def</span> <span class="nf">rexists_none</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="rexists_node">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.rexists_node">[docs]</a>
<span class="k">def</span> <span class="nf">rexists_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span></div>


<div class="viewcode-block" id="rexists_base">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.rexists_base">[docs]</a>
<span class="k">def</span> <span class="nf">rexists_base</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">rfile</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span></div>


<span class="n">_rexists_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">rexists_none</span><span class="p">,</span>
                <span class="mi">1</span> <span class="p">:</span> <span class="n">rexists_node</span><span class="p">,</span>
                <span class="mi">2</span> <span class="p">:</span> <span class="n">rexists_base</span><span class="p">}</span>

<div class="viewcode-block" id="get_contents_none">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.get_contents_none">[docs]</a>
<span class="k">def</span> <span class="nf">get_contents_none</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="get_contents_entry">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.get_contents_entry">[docs]</a>
<span class="k">def</span> <span class="nf">get_contents_entry</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetch the contents of the entry.  Returns the exact binary</span>
<span class="sd">    contents of the file.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">disambiguate</span><span class="p">(</span><span class="n">must_exist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">UserError</span><span class="p">:</span>
        <span class="c1"># There was nothing on disk with which to disambiguate</span>
        <span class="c1"># this entry.  Leave it as an Entry, but return a null</span>
        <span class="c1"># string so calls to get_contents() in emitters and the</span>
        <span class="c1"># like (e.g. in qt.py) don&#39;t have to disambiguate by hand</span>
        <span class="c1"># or catch the exception.</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_get_contents_map</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">_func_get_contents</span><span class="p">](</span><span class="n">node</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_contents_dir">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.get_contents_dir">[docs]</a>
<span class="k">def</span> <span class="nf">get_contents_dir</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return content signatures and names of all our children</span>
<span class="sd">    separated by new-lines. Ensure that the nodes are sorted.&quot;&quot;&quot;</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
        <span class="n">contents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">get_csig</span><span class="p">(),</span> <span class="n">n</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span></div>


<div class="viewcode-block" id="get_contents_file">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.get_contents_file">[docs]</a>
<span class="k">def</span> <span class="nf">get_contents_file</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">rexists</span><span class="p">():</span>
        <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">rfile</span><span class="p">()</span><span class="o">.</span><span class="n">get_abspath</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span>
            <span class="n">e</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="k">raise</span>
    <span class="k">return</span> <span class="n">contents</span></div>


<span class="n">_get_contents_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">get_contents_none</span><span class="p">,</span>
                     <span class="mi">1</span> <span class="p">:</span> <span class="n">get_contents_entry</span><span class="p">,</span>
                     <span class="mi">2</span> <span class="p">:</span> <span class="n">get_contents_dir</span><span class="p">,</span>
                     <span class="mi">3</span> <span class="p">:</span> <span class="n">get_contents_file</span><span class="p">}</span>

<div class="viewcode-block" id="target_from_source_none">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.target_from_source_none">[docs]</a>
<span class="k">def</span> <span class="nf">target_from_source_none</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="n">splitext</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="target_from_source_base">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.target_from_source_base">[docs]</a>
<span class="k">def</span> <span class="nf">target_from_source_base</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="n">splitext</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">prefix</span> <span class="o">+</span> <span class="n">splitext</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">suffix</span><span class="p">)</span></div>


<span class="n">_target_from_source_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">target_from_source_none</span><span class="p">,</span>
                           <span class="mi">1</span> <span class="p">:</span> <span class="n">target_from_source_base</span><span class="p">}</span>

<span class="c1">#</span>
<span class="c1"># The new decider subsystem for Nodes</span>
<span class="c1">#</span>
<span class="c1"># We would set and overwrite the changed_since_last_build function</span>
<span class="c1"># before, but for being able to use slots (less memory!) we now have</span>
<span class="c1"># a dictionary of the different decider functions. Then in the Node</span>
<span class="c1"># subclasses we simply store the index to the decider that should be</span>
<span class="c1"># used by it.</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="c1"># First, the single decider functions</span>
<span class="c1">#</span>
<div class="viewcode-block" id="changed_since_last_build_node">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.changed_since_last_build_node">[docs]</a>
<span class="k">def</span> <span class="nf">changed_since_last_build_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Must be overridden in a specific subclass to return True if this</span>
<span class="sd">    Node (a dependency) has changed since the last time it was used</span>
<span class="sd">    to build the specified target.  prev_ni is this Node&#39;s state (for</span>
<span class="sd">    example, its file timestamp, length, maybe content signature)</span>
<span class="sd">    as of the last time the target was built.</span>

<span class="sd">    Note that this method is called through the dependency, not the</span>
<span class="sd">    target, because a dependency Node must be able to use its own</span>
<span class="sd">    logic to decide if it changed.  For example, File Nodes need to</span>
<span class="sd">    obey if we&#39;re configured to use timestamps, but Python Value Nodes</span>
<span class="sd">    never use timestamps and always use the content.  If this method</span>
<span class="sd">    were called through the target, then each Node&#39;s implementation</span>
<span class="sd">    of this method would have to have more complicated logic to</span>
<span class="sd">    handle all the different Node types on which it might depend.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>



<div class="viewcode-block" id="changed_since_last_build_alias">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.changed_since_last_build_alias">[docs]</a>
<span class="k">def</span> <span class="nf">changed_since_last_build_alias</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">cur_csig</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_csig</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cur_csig</span> <span class="o">!=</span> <span class="n">prev_ni</span><span class="o">.</span><span class="n">csig</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="changed_since_last_build_entry">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.changed_since_last_build_entry">[docs]</a>
<span class="k">def</span> <span class="nf">changed_since_last_build_entry</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">node</span><span class="o">.</span><span class="n">disambiguate</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_decider_map</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">changed_since_last_build</span><span class="p">](</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="p">)</span></div>



<div class="viewcode-block" id="changed_since_last_build_state_changed">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.changed_since_last_build_state_changed">[docs]</a>
<span class="k">def</span> <span class="nf">changed_since_last_build_state_changed</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">state</span> <span class="o">!=</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">up_to_date</span></div>



<div class="viewcode-block" id="decide_source">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.decide_source">[docs]</a>
<span class="k">def</span> <span class="nf">decide_source</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">target</span><span class="o">.</span><span class="n">get_build_env</span><span class="p">()</span><span class="o">.</span><span class="n">decide_source</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="p">)</span></div>



<div class="viewcode-block" id="decide_target">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.decide_target">[docs]</a>
<span class="k">def</span> <span class="nf">decide_target</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">target</span><span class="o">.</span><span class="n">get_build_env</span><span class="p">()</span><span class="o">.</span><span class="n">decide_target</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="p">)</span></div>



<div class="viewcode-block" id="changed_since_last_build_python">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.changed_since_last_build_python">[docs]</a>
<span class="k">def</span> <span class="nf">changed_since_last_build_python</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">repo_node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">cur_csig</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_csig</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cur_csig</span> <span class="o">!=</span> <span class="n">prev_ni</span><span class="o">.</span><span class="n">csig</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span></div>



<span class="c1">#</span>
<span class="c1"># Now, the mapping from indices to decider functions</span>
<span class="c1">#</span>
<span class="n">_decider_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">changed_since_last_build_node</span><span class="p">,</span>
               <span class="mi">1</span> <span class="p">:</span> <span class="n">changed_since_last_build_alias</span><span class="p">,</span>
               <span class="mi">2</span> <span class="p">:</span> <span class="n">changed_since_last_build_entry</span><span class="p">,</span>
               <span class="mi">3</span> <span class="p">:</span> <span class="n">changed_since_last_build_state_changed</span><span class="p">,</span>
               <span class="mi">4</span> <span class="p">:</span> <span class="n">decide_source</span><span class="p">,</span>
               <span class="mi">5</span> <span class="p">:</span> <span class="n">decide_target</span><span class="p">,</span>
               <span class="mi">6</span> <span class="p">:</span> <span class="n">changed_since_last_build_python</span><span class="p">}</span>

<span class="n">do_store_info</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1">#</span>
<span class="c1"># The new store_info subsystem for Nodes</span>
<span class="c1">#</span>
<span class="c1"># We would set and overwrite the store_info function</span>
<span class="c1"># before, but for being able to use slots (less memory!) we now have</span>
<span class="c1"># a dictionary of the different functions. Then in the Node</span>
<span class="c1"># subclasses we simply store the index to the info method that should be</span>
<span class="c1"># used by it.</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="c1"># First, the single info functions</span>
<span class="c1">#</span>

<div class="viewcode-block" id="store_info_pass">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.store_info_pass">[docs]</a>
<span class="k">def</span> <span class="nf">store_info_pass</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="store_info_file">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.store_info_file">[docs]</a>
<span class="k">def</span> <span class="nf">store_info_file</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Merge our build information into the already-stored entry.</span>
    <span class="c1"># This accommodates &quot;chained builds&quot; where a file that&#39;s a target</span>
    <span class="c1"># in one build (SConstruct file) is a source in a different build.</span>
    <span class="c1"># See test/chained-build.py for the use case.</span>
    <span class="k">if</span> <span class="n">do_store_info</span><span class="p">:</span>
        <span class="n">node</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">sconsign</span><span class="p">()</span><span class="o">.</span><span class="n">store_info</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></div>



<span class="n">store_info_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span> <span class="p">:</span> <span class="n">store_info_pass</span><span class="p">,</span>
                  <span class="mi">1</span> <span class="p">:</span> <span class="n">store_info_file</span><span class="p">}</span>

<span class="c1"># Classes for signature info for Nodes.</span>

<div class="viewcode-block" id="NodeInfoBase">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase">[docs]</a>
<span class="k">class</span> <span class="nc">NodeInfoBase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The generic base class for signature information for a Node.</span>

<span class="sd">    Node subclasses should subclass NodeInfoBase to provide their own</span>
<span class="sd">    logic for dealing with their own Node-specific signature information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;__weakref__&#39;</span><span class="p">,)</span>
    <span class="n">current_version_id</span> <span class="o">=</span> <span class="mi">2</span>

<div class="viewcode-block" id="NodeInfoBase.update">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase.update">[docs]</a>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">field_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_list</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">field_list</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s1">&#39;get_&#39;</span> <span class="o">+</span> <span class="n">f</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">func</span><span class="p">())</span></div>


<div class="viewcode-block" id="NodeInfoBase.convert">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase.convert">[docs]</a>
    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span></div>


<div class="viewcode-block" id="NodeInfoBase.merge">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase.merge">[docs]</a>
    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">NodeInfoBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge the fields of another object into this object. Already existing</span>
<span class="sd">        information is overwritten by the other instance&#39;s data.</span>
<span class="sd">        WARNING: If a &#39;__dict__&#39; slot is added, it should be updated instead of</span>
<span class="sd">        replaced.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></div>


<div class="viewcode-block" id="NodeInfoBase.format">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase.format">[docs]</a>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">field_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">field_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_list</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">field_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mro</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__slots__&#39;</span><span class="p">,</span> <span class="p">()):</span>
                        <span class="k">if</span> <span class="n">slot</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;__weakref__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">):</span>
                            <span class="n">field_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
                <span class="n">field_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">field_list</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">f</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">f</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">names</span><span class="p">:</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">field</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="n">f</span>
            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fields</span></div>


<div class="viewcode-block" id="NodeInfoBase.__getstate__">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase.__getstate__">[docs]</a>
    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return all fields that shall be pickled. Walk the slots in the class</span>
<span class="sd">        hierarchy and add those to the state dictionary. If a &#39;__dict__&#39; slot is</span>
<span class="sd">        available, copy all entries to the dictionary. Also include the version</span>
<span class="sd">        id, which is fixed for all instances of a class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mro</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;__slots__&#39;</span><span class="p">,()):</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
                    <span class="n">state</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="n">state</span><span class="p">[</span><span class="s1">&#39;_version_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_version_id</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;__weakref__&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">state</span></div>


<div class="viewcode-block" id="NodeInfoBase.__setstate__">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeInfoBase.__setstate__">[docs]</a>
    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restore the attributes from a pickled state. The version is discarded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO check or discard version</span>
        <span class="k">del</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;_version_id&#39;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">state</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;__weakref__&#39;</span><span class="p">,):</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="BuildInfoBase">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.BuildInfoBase">[docs]</a>
<span class="k">class</span> <span class="nc">BuildInfoBase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The generic base class for build information for a Node.</span>

<span class="sd">    This is what gets stored in a .sconsign file for each target file.</span>
<span class="sd">    It contains a NodeInfo instance for this node (signature information</span>
<span class="sd">    that&#39;s specific to the type of Node) and direct attributes for the</span>
<span class="sd">    generic build stuff we have to track:  sources, explicit dependencies,</span>
<span class="sd">    implicit dependencies, and action information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bsourcesigs&quot;</span><span class="p">,</span> <span class="s2">&quot;bdependsigs&quot;</span><span class="p">,</span> <span class="s2">&quot;bimplicitsigs&quot;</span><span class="p">,</span> <span class="s2">&quot;bactsig&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;bsources&quot;</span><span class="p">,</span> <span class="s2">&quot;bdepends&quot;</span><span class="p">,</span> <span class="s2">&quot;bact&quot;</span><span class="p">,</span> <span class="s2">&quot;bimplicit&quot;</span><span class="p">,</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">)</span>
    <span class="n">current_version_id</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Create an object attribute from the class attribute so it ends up</span>
        <span class="c1"># in the pickled data in the .sconsign file.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bsourcesigs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BuildInfoBase</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bdependsigs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BuildInfoBase</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bimplicitsigs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">BuildInfoBase</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bactsig</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="BuildInfoBase.merge">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.BuildInfoBase.merge">[docs]</a>
    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">BuildInfoBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge the fields of another object into this object. Already existing</span>
<span class="sd">        information is overwritten by the other instance&#39;s data.</span>
<span class="sd">        WARNING: If a &#39;__dict__&#39; slot is added, it should be updated instead of</span>
<span class="sd">        replaced.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></div>


<div class="viewcode-block" id="BuildInfoBase.__getstate__">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.BuildInfoBase.__getstate__">[docs]</a>
    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return all fields that shall be pickled. Walk the slots in the class</span>
<span class="sd">        hierarchy and add those to the state dictionary. If a &#39;__dict__&#39; slot is</span>
<span class="sd">        available, copy all entries to the dictionary. Also include the version</span>
<span class="sd">        id, which is fixed for all instances of a class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mro</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s1">&#39;__slots__&#39;</span><span class="p">,()):</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
                    <span class="n">state</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="n">state</span><span class="p">[</span><span class="s1">&#39;_version_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_version_id</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;__weakref__&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">state</span></div>


<div class="viewcode-block" id="BuildInfoBase.__setstate__">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.BuildInfoBase.__setstate__">[docs]</a>
    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restore the attributes from a pickled state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO check or discard version</span>
        <span class="k">del</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;_version_id&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">state</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;__weakref__&#39;</span><span class="p">,):</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Node">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node">[docs]</a>
<span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">NoSlotsPyPy</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The base Node class, for entities that we know how to</span>
<span class="sd">    build, or use to build other Nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sources&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;sources_set&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;target_peers&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_specific_sources&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;depends&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;depends_set&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ignore&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ignore_set&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;prerequisites&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;implicit&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;waiting_parents&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;waiting_s_e&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ref_count&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;wkids&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;env&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;state&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;precious&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;noclean&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;nocache&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;cached&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;always_build&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;includes&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;attributes&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;side_effect&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;side_effects&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;linked&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_memo&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;executor&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;binfo&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ninfo&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;builder&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;is_explicit&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;implicit_set&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;changed_since_last_build&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;store_info&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;pseudo&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_tags&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_func_is_derived&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_func_exists&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_func_rexists&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_func_get_contents&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_func_target_from_source&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="Node.Attrs">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.Attrs">[docs]</a>
    <span class="k">class</span> <span class="nc">Attrs</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A generic place to store extra information about the Node.</span>

<span class="sd">        Defines ``__slots__`` for performance, but different consumers</span>
<span class="sd">        define their own attributes, so to avoid having to collect them</span>
<span class="sd">        all here, we add a ``__dict__`` slot to get dynamic attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;shared&#39;</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">)</span></div>



    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Debug</span><span class="o">.</span><span class="n">track_instances</span><span class="p">:</span> <span class="n">logInstanceCreation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Node.Node&#39;</span><span class="p">)</span>
        <span class="c1"># Note that we no longer explicitly initialize a self.builder</span>
        <span class="c1"># attribute to None here.  That&#39;s because the self.builder</span>
        <span class="c1"># attribute may be created on-the-fly later by a subclass (the</span>
        <span class="c1"># canonical example being a builder to fetch a file from a</span>
        <span class="c1"># source code system like CVS or Subversion).</span>

        <span class="c1"># Each list of children that we maintain is accompanied by a</span>
        <span class="c1"># dictionary used to look up quickly whether a node is already</span>
        <span class="c1"># present in the list.  Empirical tests showed that it was</span>
        <span class="c1"># fastest to maintain them as side-by-side Node attributes in</span>
        <span class="c1"># this way, instead of wrapping up each list+dictionary pair in</span>
        <span class="c1"># a class.  (Of course, we could always still do that in the</span>
        <span class="c1"># future if we had a good reason to...).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>       <span class="c1"># source files used to build node</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sources_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_specific_sources</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">depends</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>       <span class="c1"># explicit dependencies (from Depends)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">depends_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>        <span class="c1"># dependencies to ignore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prerequisites</span><span class="p">:</span> <span class="n">UniqueList</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>    <span class="c1"># implicit (scanned) dependencies (None means not scanned yet)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waiting_parents</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waiting_s_e</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ref_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wkids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>       <span class="c1"># Kids yet to walk, when it&#39;s an array</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">:</span> <span class="n">Environment</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">no_state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precious</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pseudo</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noclean</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nocache</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cached</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># is this node pulled from cache?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_build</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">includes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Attrs</span><span class="p">()</span> <span class="c1"># Generic place to stick information about the Node.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side_effect</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># true iff this node is a side effect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side_effects</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># the side effects of building this target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linked</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># is this node linked to the variant directory?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed_since_last_build</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Index for &quot;_decider_map&quot;.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store_info</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Index for &quot;store_info_map&quot;.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_func_is_derived</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Index for &quot;_is_derived_map&quot;.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_func_exists</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Index for &quot;_exists_map&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_func_rexists</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># Index for &quot;_rexists_map&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_func_get_contents</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Index for &quot;_get_contents_map&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_func_target_from_source</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Index for &quot;_target_from_source_map&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span><span class="p">:</span> <span class="n">NodeInfoBase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clear_memoized_values</span><span class="p">()</span>

        <span class="c1"># Let the interface in which the build engine is embedded</span>
        <span class="c1"># annotate this Node with its own info (like a description of</span>
        <span class="c1"># what line in what file created the node, for example).</span>
        <span class="n">Annotate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__fspath__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Node.disambiguate">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.disambiguate">[docs]</a>
    <span class="k">def</span> <span class="nf">disambiguate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">must_exist</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Node.get_suffix">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_suffix">[docs]</a>
    <span class="k">def</span> <span class="nf">get_suffix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="Node.get_build_env">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_build_env">[docs]</a>
    <span class="nd">@SCons</span><span class="o">.</span><span class="n">Memoize</span><span class="o">.</span><span class="n">CountMethodCall</span>
    <span class="k">def</span> <span class="nf">get_build_env</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Environment</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the appropriate Environment to build this node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memo</span><span class="p">[</span><span class="s1">&#39;get_build_env&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">()</span><span class="o">.</span><span class="n">get_build_env</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memo</span><span class="p">[</span><span class="s1">&#39;get_build_env&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Node.get_build_scanner_path">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_build_scanner_path">[docs]</a>
    <span class="k">def</span> <span class="nf">get_build_scanner_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scanner</span><span class="p">:</span> <span class="n">ScannerBase</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the appropriate scanner path for this node.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">()</span><span class="o">.</span><span class="n">get_build_scanner_path</span><span class="p">(</span><span class="n">scanner</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.set_executor">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_executor">[docs]</a>
    <span class="k">def</span> <span class="nf">set_executor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">executor</span><span class="p">:</span> <span class="n">Executor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the action executor for this node.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executor</span> <span class="o">=</span> <span class="n">executor</span></div>


<div class="viewcode-block" id="Node.get_executor">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_executor">[docs]</a>
    <span class="k">def</span> <span class="nf">get_executor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Executor</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the action executor for this node.  Create one if</span>
<span class="sd">        there isn&#39;t already one, and requested to do so.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">executor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">executor</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">create</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">act</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">action</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">executor</span> <span class="o">=</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Executor</span><span class="o">.</span><span class="n">Null</span><span class="p">(</span><span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="p">])</span>  <span class="c1"># type: ignore[assignment]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">executor</span> <span class="o">=</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Executor</span><span class="o">.</span><span class="n">Executor</span><span class="p">(</span><span class="n">act</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">env</span><span class="p">,</span>
                                                   <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">overrides</span><span class="p">],</span>
                                                   <span class="p">[</span><span class="bp">self</span><span class="p">],</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executor</span> <span class="o">=</span> <span class="n">executor</span>
        <span class="k">return</span> <span class="n">executor</span></div>


<div class="viewcode-block" id="Node.executor_cleanup">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.executor_cleanup">[docs]</a>
    <span class="k">def</span> <span class="nf">executor_cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Let the executor clean up any cached information.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">executor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">(</span><span class="n">create</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">executor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">executor</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.reset_executor">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.reset_executor">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_executor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove cached executor; forces recompute when needed.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;executor&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="Node.push_to_cache">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.push_to_cache">[docs]</a>
    <span class="k">def</span> <span class="nf">push_to_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Try to push a node into a cache</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Node.retrieve_from_cache">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.retrieve_from_cache">[docs]</a>
    <span class="k">def</span> <span class="nf">retrieve_from_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Try to retrieve the node&#39;s content from a cache</span>

<span class="sd">        This method is called from multiple threads in a parallel build,</span>
<span class="sd">        so only do thread safe stuff here. Do thread unsafe stuff</span>
<span class="sd">        in :meth:`built`.</span>

<span class="sd">        Returns true if the node was successfully retrieved.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


    <span class="c1">#</span>
    <span class="c1"># Taskmaster interface subsystem</span>
    <span class="c1">#</span>

<div class="viewcode-block" id="Node.make_ready">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.make_ready">[docs]</a>
    <span class="k">def</span> <span class="nf">make_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Node ready for evaluation.</span>

<span class="sd">        This is called before the Taskmaster decides if the Node is</span>
<span class="sd">        up-to-date or not.  Overriding this method allows for a Node</span>
<span class="sd">        subclass to be disambiguated if necessary, or for an implicit</span>
<span class="sd">        source builder to be attached.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>


<div class="viewcode-block" id="Node.prepare">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.prepare">[docs]</a>
    <span class="k">def</span> <span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare for this Node to be built.</span>

<span class="sd">        This is called after the Taskmaster has decided that the Node</span>
<span class="sd">        is out-of-date and must be rebuilt, but before actually calling</span>
<span class="sd">        the method to build the Node.</span>

<span class="sd">        This default implementation checks that explicit or implicit</span>
<span class="sd">        dependencies either exist or are derived, and initializes the</span>
<span class="sd">        BuildInfo structure that will hold the information about how</span>
<span class="sd">        this node is, uh, built.</span>

<span class="sd">        (The existence of source files is checked separately by the</span>
<span class="sd">        Executor, which aggregates checks for all of the targets built</span>
<span class="sd">        by a specific action.)</span>

<span class="sd">        Overriding this method allows for for a Node subclass to remove</span>
<span class="sd">        the underlying file from the file system.  Note that subclass</span>
<span class="sd">        methods should call this base class method to get the child</span>
<span class="sd">        check and the BuildInfo structure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">missing</span><span class="p">():</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Explicit dependency `</span><span class="si">%s</span><span class="s2">&#39; not found, needed by target `</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span>
                    <span class="k">raise</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">StopError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">missing</span><span class="p">():</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Implicit dependency `</span><span class="si">%s</span><span class="s2">&#39; not found, needed by target `</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span>
                    <span class="k">raise</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">StopError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_binfo</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.build">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.build">[docs]</a>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Actually build the node.</span>

<span class="sd">        This is called by the Taskmaster after it&#39;s decided that the</span>
<span class="sd">        Node is out-of-date and must be rebuilt, and after the</span>
<span class="sd">        :meth:`prepare` method has gotten everything, uh, prepared.</span>

<span class="sd">        This method is called from multiple threads in a parallel build,</span>
<span class="sd">        so only do thread safe stuff here. Do thread unsafe stuff</span>
<span class="sd">        in :meth:`built`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">()(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">BuildError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span><span class="o">.</span><span class="n">node</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">raise</span></div>


<div class="viewcode-block" id="Node.built">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.built">[docs]</a>
    <span class="k">def</span> <span class="nf">built</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called just after this node is successfully built.&quot;&quot;&quot;</span>

        <span class="c1"># Clear the implicit dependency caches of any Nodes</span>
        <span class="c1"># waiting for this Node to be built.</span>
        <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">waiting_parents</span><span class="p">:</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">implicit</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1"># Handle issue where builder emits more than one target and</span>
            <span class="c1"># the source file for the builder is generated.</span>
            <span class="c1"># in that case only the first target was getting it&#39;s .implicit</span>
            <span class="c1"># cleared when the source file is built (second scan).</span>
            <span class="c1"># leaving only partial implicits from scan before source file is generated</span>
            <span class="c1"># typically the compiler only. Then scanned files are appended</span>
            <span class="c1"># This is persisted to sconsign and rebuild causes false rebuilds</span>
            <span class="c1"># because the ordering of the implicit list then changes to what it</span>
            <span class="c1"># should have been.</span>
            <span class="c1"># This is at least the following bugs</span>
            <span class="c1"># https://github.com/SCons/scons/issues/2811</span>
            <span class="c1"># https://jira.mongodb.org/browse/SERVER-33111</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">peer</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">target_peers</span><span class="p">:</span>
                    <span class="n">peer</span><span class="o">.</span><span class="n">implicit</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pseudo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="k">raise</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">UserError</span><span class="p">(</span><span class="s2">&quot;Pseudo target &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; must not exist&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="n">do_store_info</span><span class="p">:</span>
                <span class="n">SCons</span><span class="o">.</span><span class="n">Warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">SCons</span><span class="o">.</span><span class="n">Warnings</span><span class="o">.</span><span class="n">TargetNotBuiltWarning</span><span class="p">,</span>
                                    <span class="s2">&quot;Cannot find target &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; after building&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.visited">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.visited">[docs]</a>
    <span class="k">def</span> <span class="nf">visited</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called just after this node has been visited (with or</span>
<span class="sd">        without a build).&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">binfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">binfo</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="c1"># Apparently this node doesn&#39;t need build info, so</span>
            <span class="c1"># don&#39;t bother calculating or storing it.</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">SCons</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">store_info_map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">store_info</span><span class="p">](</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.release_target_info">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.release_target_info">[docs]</a>
    <span class="k">def</span> <span class="nf">release_target_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called just after this node has been marked</span>
<span class="sd">        up-to-date or was built completely.</span>

<span class="sd">        This is where we try to release as many target node infos</span>
<span class="sd">        as possible for clean builds and update runs, in order</span>
<span class="sd">        to minimize the overall memory consumption.</span>

<span class="sd">        By purging attributes that aren&#39;t needed any longer after</span>
<span class="sd">        a Node (=File) got built, we don&#39;t have to care that much how</span>
<span class="sd">        many KBytes a Node actually requires...as long as we free</span>
<span class="sd">        the memory shortly afterwards.</span>

<span class="sd">        @see: built() and File.release_target_info()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>


<div class="viewcode-block" id="Node.add_to_waiting_s_e">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_to_waiting_s_e">[docs]</a>
    <span class="k">def</span> <span class="nf">add_to_waiting_s_e</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waiting_s_e</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.add_to_waiting_parents">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_to_waiting_parents">[docs]</a>
    <span class="k">def</span> <span class="nf">add_to_waiting_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of nodes added to our waiting parents list:</span>
<span class="sd">        1 if we add a unique waiting parent, 0 if not.  (Note that the</span>
<span class="sd">        returned values are intended to be used to increment a reference</span>
<span class="sd">        count, so don&#39;t think you can &quot;clean up&quot; this function by using</span>
<span class="sd">        True and False instead...)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">waiting_parents</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">wp</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">wp</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="Node.postprocess">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.postprocess">[docs]</a>
    <span class="k">def</span> <span class="nf">postprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean up anything we don&#39;t need to hang onto after we&#39;ve</span>
<span class="sd">        been built.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executor_cleanup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waiting_parents</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.clear">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.clear">[docs]</a>
    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Completely clear a Node of all its cached state (so that it</span>
<span class="sd">        can be re-evaluated by interfaces that do continuous integration</span>
<span class="sd">        builds).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The del_binfo() call here isn&#39;t necessary for normal execution,</span>
        <span class="c1"># but is for interactive mode, where we might rebuild the same</span>
        <span class="c1"># target and need to start from scratch.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">del_binfo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_memoized_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ninfo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executor_cleanup</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;cachedir_csig&#39;</span><span class="p">,</span> <span class="s1">&#39;cachesig&#39;</span><span class="p">,</span> <span class="s1">&#39;contentsig&#39;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cached</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">includes</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.clear_memoized_values">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.clear_memoized_values">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_memoized_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_memo</span> <span class="o">=</span> <span class="p">{}</span></div>


<div class="viewcode-block" id="Node.builder_set">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.builder_set">[docs]</a>
    <span class="k">def</span> <span class="nf">builder_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">builder</span><span class="p">:</span> <span class="n">BuilderBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="n">builder</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">executor</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="Node.has_builder">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.has_builder">[docs]</a>
    <span class="k">def</span> <span class="nf">has_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether this Node has a builder or not.</span>

<span class="sd">        In Boolean tests, this turns out to be a *lot* more efficient</span>
<span class="sd">        than simply examining the builder attribute directly (&quot;if</span>
<span class="sd">        node.builder: ...&quot;). When the builder attribute is examined</span>
<span class="sd">        directly, it ends up calling __getattr__ for both the __len__</span>
<span class="sd">        and __bool__ attributes on instances of our Builder Proxy</span>
<span class="sd">        class(es), generating a bazillion extra calls and slowing</span>
<span class="sd">        things down immensely.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="c1"># There was no explicit builder for this Node, so initialize</span>
            <span class="c1"># the self.builder attribute to None now.</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.set_explicit">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_explicit">[docs]</a>
    <span class="k">def</span> <span class="nf">set_explicit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_explicit</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_explicit</span> <span class="o">=</span> <span class="n">is_explicit</span></div>


<div class="viewcode-block" id="Node.has_explicit_builder">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.has_explicit_builder">[docs]</a>
    <span class="k">def</span> <span class="nf">has_explicit_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether this Node has an explicit builder.</span>

<span class="sd">        This allows an internal Builder created by SCons to be marked</span>
<span class="sd">        non-explicit, so that it can be overridden by an explicit</span>
<span class="sd">        builder that the user supplies (the canonical example being</span>
<span class="sd">        directories).&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_explicit</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_explicit</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Node.get_builder">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_builder">[docs]</a>
    <span class="k">def</span> <span class="nf">get_builder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default_builder</span><span class="p">:</span> <span class="n">BuilderBase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BuilderBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the set builder, or a specified default value&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default_builder</span></div>


    <span class="n">multiple_side_effect_has_builder</span> <span class="o">=</span> <span class="n">has_builder</span>

<div class="viewcode-block" id="Node.is_derived">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.is_derived">[docs]</a>
    <span class="k">def</span> <span class="nf">is_derived</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns true if this node is derived (i.e. built).</span>

<span class="sd">        This should return true only for nodes whose path should be in</span>
<span class="sd">        the variant directory when duplicate=0 and should contribute their build</span>
<span class="sd">        signatures when they are used as source files to other derived files. For</span>
<span class="sd">        example: source with source builders are not derived in this sense,</span>
<span class="sd">        and hence should not return true.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_is_derived_map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_func_is_derived</span><span class="p">](</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.is_sconscript">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.is_sconscript">[docs]</a>
    <span class="k">def</span> <span class="nf">is_sconscript</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Returns true if this node is an sconscript &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">SConscriptNodes</span></div>


<div class="viewcode-block" id="Node.is_conftest">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.is_conftest">[docs]</a>
    <span class="k">def</span> <span class="nf">is_conftest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Returns true if this node is an conftest node&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">conftest_node</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Node.check_attributes">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.check_attributes">[docs]</a>
    <span class="k">def</span> <span class="nf">check_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Simple API to check if the node.attributes for name has been set&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;attributes&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>



<div class="viewcode-block" id="Node.alter_targets">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.alter_targets">[docs]</a>
    <span class="k">def</span> <span class="nf">alter_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of alternate targets for this Node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.get_found_includes">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_found_includes">[docs]</a>
    <span class="k">def</span> <span class="nf">get_found_includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">scanner</span><span class="p">:</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the scanned include lines (implicit dependencies)</span>
<span class="sd">        found in this node.</span>

<span class="sd">        The default is no implicit dependencies.  We expect this method</span>
<span class="sd">        to be overridden by any subclass that can be scanned for</span>
<span class="sd">        implicit dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Node.get_implicit_deps">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_implicit_deps">[docs]</a>
    <span class="k">def</span> <span class="nf">get_implicit_deps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">initial_scanner</span><span class="p">:</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">path_func</span><span class="p">,</span> <span class="n">kw</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of implicit dependencies for this node.</span>

<span class="sd">        This method exists to handle recursive invocation of the scanner</span>
<span class="sd">        on the implicit dependencies returned by the scanner, if the</span>
<span class="sd">        scanner&#39;s recursive flag says that we should.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">path_memo</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">root_node_scanner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_scanner</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">initial_scanner</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="n">scanner</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">_get_scanner</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">initial_scanner</span><span class="p">,</span> <span class="n">root_node_scanner</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">scanner</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">path_memo</span><span class="p">[</span><span class="n">scanner</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">path_func</span><span class="p">(</span><span class="n">scanner</span><span class="p">)</span>
                <span class="n">path_memo</span><span class="p">[</span><span class="n">scanner</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>

            <span class="n">included_deps</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">get_found_includes</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">scanner</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">included_deps</span><span class="p">:</span>
                <span class="n">dependencies</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">included_deps</span><span class="p">)</span>
                <span class="n">seen</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">included_deps</span><span class="p">)</span>
                <span class="n">nodes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">scanner</span><span class="o">.</span><span class="n">recurse_nodes</span><span class="p">(</span><span class="n">included_deps</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">dependencies</span></div>


<div class="viewcode-block" id="Node._get_scanner">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node._get_scanner">[docs]</a>
    <span class="k">def</span> <span class="nf">_get_scanner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">initial_scanner</span><span class="p">:</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">root_node_scanner</span><span class="p">:</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">kw</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">initial_scanner</span><span class="p">:</span>
            <span class="c1"># handle explicit scanner case</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="n">initial_scanner</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># handle implicit scanner case</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_env_scanner</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">scanner</span><span class="p">:</span>
                <span class="n">scanner</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">scanner</span><span class="p">:</span>
            <span class="c1"># no scanner could be found for the given node&#39;s scanner key;</span>
            <span class="c1"># thus, make an attempt at using a default.</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="n">root_node_scanner</span>

        <span class="k">return</span> <span class="n">scanner</span></div>


<div class="viewcode-block" id="Node.get_env_scanner">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_env_scanner">[docs]</a>
    <span class="k">def</span> <span class="nf">get_env_scanner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">kw</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">env</span><span class="o">.</span><span class="n">get_scanner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scanner_key</span><span class="p">())</span></div>


<div class="viewcode-block" id="Node.get_target_scanner">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_target_scanner">[docs]</a>
    <span class="k">def</span> <span class="nf">get_target_scanner</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">target_scanner</span></div>


<div class="viewcode-block" id="Node.get_source_scanner">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_source_scanner">[docs]</a>
    <span class="k">def</span> <span class="nf">get_source_scanner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the source scanner for the specified node</span>

<span class="sd">        NOTE:  &quot;self&quot; is the target being built, &quot;node&quot; is</span>
<span class="sd">        the source file for which we want to fetch the scanner.</span>

<span class="sd">        Implies self.has_builder() is true; again, expect to only be</span>
<span class="sd">        called from locations where this is already verified.</span>

<span class="sd">        This function may be called very often; it attempts to cache</span>
<span class="sd">        the scanner found to improve performance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scanner</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">source_scanner</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">scanner</span><span class="p">:</span>
            <span class="c1"># The builder didn&#39;t have an explicit scanner, so go look up</span>
            <span class="c1"># a scanner from env[&#39;SCANNERS&#39;] based on the node&#39;s scanner</span>
            <span class="c1"># key (usually the file extension).</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_env_scanner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_build_env</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">scanner</span><span class="p">:</span>
            <span class="n">scanner</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scanner</span></div>


<div class="viewcode-block" id="Node.add_to_implicit">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_to_implicit">[docs]</a>
    <span class="k">def</span> <span class="nf">add_to_implicit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deps</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;implicit&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implicit_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_children_reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implicit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit_set</span><span class="p">,</span> <span class="n">deps</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.scan">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.scan">[docs]</a>
    <span class="k">def</span> <span class="nf">scan</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scan this node&#39;s dependents for implicit dependencies.&quot;&quot;&quot;</span>
        <span class="c1"># Don&#39;t bother scanning non-derived files, because we don&#39;t</span>
        <span class="c1"># care what their dependencies are.</span>
        <span class="c1"># Don&#39;t scan again, if we already have scanned.</span>
        <span class="n">T</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implicit_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children_reset</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_builder</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="n">build_env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_env</span><span class="p">()</span>
        <span class="n">executor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">()</span>

        <span class="c1"># Here&#39;s where we implement --implicit-cache.</span>
        <span class="k">if</span> <span class="n">implicit_cache</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">implicit_deps_changed</span><span class="p">:</span>
            <span class="n">implicit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stored_implicit</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">implicit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># We now add the implicit dependencies returned from the</span>
                <span class="c1"># stored .sconsign entry to have already been converted</span>
                <span class="c1"># to Nodes for us.  (We used to run them through a</span>
                <span class="c1"># source_factory function here.)</span>

                <span class="c1"># Update all of the targets with them.  This</span>
                <span class="c1"># essentially short-circuits an N*M scan of the</span>
                <span class="c1"># sources for each individual target, which is a hell</span>
                <span class="c1"># of a lot more efficient.</span>
                <span class="k">def</span> <span class="nf">print_nodelist</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">tgts</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">path</span><span class="si">!r}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">n</span><span class="p">]</span>
                    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tgts</span><span class="p">)</span><span class="si">}</span><span class="s2">]&quot;</span>

                <span class="k">for</span> <span class="n">tgt</span> <span class="ow">in</span> <span class="n">executor</span><span class="o">.</span><span class="n">get_all_targets</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;adding implicit </span><span class="si">{</span><span class="n">print_nodelist</span><span class="p">(</span><span class="n">implicit</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">tgt</span><span class="si">!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">tgt</span><span class="o">.</span><span class="n">add_to_implicit</span><span class="p">(</span><span class="n">implicit</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">implicit_deps_unchanged</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_up_to_date</span><span class="p">():</span>
                    <span class="k">return</span>
                <span class="c1"># one of this node&#39;s sources has changed,</span>
                <span class="c1"># so we must recalculate the implicit deps for all targets</span>
                <span class="k">for</span> <span class="n">tgt</span> <span class="ow">in</span> <span class="n">executor</span><span class="o">.</span><span class="n">get_all_targets</span><span class="p">():</span>
                    <span class="n">tgt</span><span class="o">.</span><span class="n">implicit</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">tgt</span><span class="o">.</span><span class="n">implicit_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># Have the executor scan the sources.</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">scan_sources</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">source_scanner</span><span class="p">)</span>

        <span class="c1"># If there&#39;s a target scanner, have the executor scan the target</span>
        <span class="c1"># node itself and associated targets that might be built.</span>
        <span class="n">scanner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_scanner</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scanner</span><span class="p">:</span>
            <span class="n">executor</span><span class="o">.</span><span class="n">scan_targets</span><span class="p">(</span><span class="n">scanner</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.scanner_key">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.scanner_key">[docs]</a>
    <span class="k">def</span> <span class="nf">scanner_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.select_scanner">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.select_scanner">[docs]</a>
    <span class="k">def</span> <span class="nf">select_scanner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scanner</span><span class="p">:</span> <span class="n">ScannerBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ScannerBase</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Selects a scanner for this Node.</span>

<span class="sd">        This is a separate method so it can be overridden by Node</span>
<span class="sd">        subclasses (specifically, Node.FS.Dir) that *must* use their</span>
<span class="sd">        own Scanner and don&#39;t select one the Scanner.Selector that&#39;s</span>
<span class="sd">        configured for the target.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">scanner</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.env_set">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.env_set">[docs]</a>
    <span class="k">def</span> <span class="nf">env_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span><span class="p">,</span> <span class="n">safe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">safe</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">env</span></div>


    <span class="c1">#</span>
    <span class="c1"># SIGNATURE SUBSYSTEM</span>
    <span class="c1">#</span>

    <span class="n">NodeInfo</span> <span class="o">=</span> <span class="n">NodeInfoBase</span>
    <span class="n">BuildInfo</span> <span class="o">=</span> <span class="n">BuildInfoBase</span>

<div class="viewcode-block" id="Node.new_ninfo">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.new_ninfo">[docs]</a>
    <span class="k">def</span> <span class="nf">new_ninfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NodeInfoBase</span><span class="p">:</span>
        <span class="n">ninfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NodeInfo</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ninfo</span></div>


<div class="viewcode-block" id="Node.get_ninfo">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_ninfo">[docs]</a>
    <span class="k">def</span> <span class="nf">get_ninfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NodeInfoBase</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ninfo</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span></div>


<div class="viewcode-block" id="Node.new_binfo">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.new_binfo">[docs]</a>
    <span class="k">def</span> <span class="nf">new_binfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BuildInfoBase</span><span class="p">:</span>
        <span class="n">binfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BuildInfo</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">binfo</span></div>


<div class="viewcode-block" id="Node.get_binfo">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_binfo">[docs]</a>
    <span class="k">def</span> <span class="nf">get_binfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BuildInfoBase</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch a node&#39;s build information.</span>

<span class="sd">        node - the node whose sources will be collected</span>
<span class="sd">        cache - alternate node to use for the signature cache</span>
<span class="sd">        returns - the build signature</span>

<span class="sd">        This no longer handles the recursive descent of the</span>
<span class="sd">        node&#39;s children&#39;s signatures.  We expect that they&#39;re</span>
<span class="sd">        already built and updated by someone else, if that&#39;s</span>
<span class="sd">        what&#39;s wanted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">binfo</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">binfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_binfo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binfo</span> <span class="o">=</span> <span class="n">binfo</span>

        <span class="n">executor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">()</span>
        <span class="n">ignore_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_set</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_builder</span><span class="p">():</span>
            <span class="n">binfo</span><span class="o">.</span><span class="n">bact</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">executor</span><span class="p">)</span>
            <span class="n">binfo</span><span class="o">.</span><span class="n">bactsig</span> <span class="o">=</span> <span class="n">hash_signature</span><span class="p">(</span><span class="n">executor</span><span class="o">.</span><span class="n">get_contents</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_specific_sources</span><span class="p">:</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_set</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">sources</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">get_unignored_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">)</span>

        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">binfo</span><span class="o">.</span><span class="n">bsources</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sources</span> <span class="k">if</span> <span class="n">s</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>
        <span class="n">binfo</span><span class="o">.</span><span class="n">bsourcesigs</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">get_ninfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">binfo</span><span class="o">.</span><span class="n">bsources</span><span class="p">]</span>

        <span class="n">binfo</span><span class="o">.</span><span class="n">bdepends</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_set</span><span class="p">]</span>
        <span class="n">binfo</span><span class="o">.</span><span class="n">bdependsigs</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">get_ninfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends</span><span class="p">]</span>

        <span class="c1"># Because self.implicit is initialized to None (and not empty list [])</span>
        <span class="c1"># we have to handle this case</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span><span class="p">:</span>
            <span class="n">binfo</span><span class="o">.</span><span class="n">bimplicit</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">binfo</span><span class="o">.</span><span class="n">bimplicitsigs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">binfo</span><span class="o">.</span><span class="n">bimplicit</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_set</span><span class="p">]</span>
            <span class="n">binfo</span><span class="o">.</span><span class="n">bimplicitsigs</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">get_ninfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">binfo</span><span class="o">.</span><span class="n">bimplicit</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">binfo</span></div>


<div class="viewcode-block" id="Node.del_binfo">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.del_binfo">[docs]</a>
    <span class="k">def</span> <span class="nf">del_binfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the build info from this node.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;binfo&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="Node.get_csig">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_csig">[docs]</a>
    <span class="k">def</span> <span class="nf">get_csig</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span><span class="o">.</span><span class="n">csig</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">ninfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ninfo</span><span class="p">()</span>
            <span class="n">ninfo</span><span class="o">.</span><span class="n">csig</span> <span class="o">=</span> <span class="n">hash_signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_contents</span><span class="p">())</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ninfo</span><span class="o">.</span><span class="n">csig</span></div>


<div class="viewcode-block" id="Node.get_cachedir_csig">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_cachedir_csig">[docs]</a>
    <span class="k">def</span> <span class="nf">get_cachedir_csig</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_csig</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.get_stored_info">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_stored_info">[docs]</a>
    <span class="k">def</span> <span class="nf">get_stored_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SConsignEntry</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.get_stored_implicit">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_stored_implicit">[docs]</a>
    <span class="k">def</span> <span class="nf">get_stored_implicit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the stored implicit dependencies&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1">#</span>

<div class="viewcode-block" id="Node.set_precious">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_precious">[docs]</a>
    <span class="k">def</span> <span class="nf">set_precious</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">precious</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Node&#39;s precious value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precious</span> <span class="o">=</span> <span class="n">precious</span></div>


<div class="viewcode-block" id="Node.set_pseudo">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_pseudo">[docs]</a>
    <span class="k">def</span> <span class="nf">set_pseudo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pseudo</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Node&#39;s pseudo value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pseudo</span> <span class="o">=</span> <span class="n">pseudo</span></div>


<div class="viewcode-block" id="Node.set_noclean">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_noclean">[docs]</a>
    <span class="k">def</span> <span class="nf">set_noclean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">noclean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Node&#39;s noclean value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noclean</span> <span class="o">=</span> <span class="n">noclean</span></div>


<div class="viewcode-block" id="Node.set_nocache">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_nocache">[docs]</a>
    <span class="k">def</span> <span class="nf">set_nocache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nocache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Node&#39;s nocache value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nocache</span> <span class="o">=</span> <span class="n">nocache</span></div>


<div class="viewcode-block" id="Node.set_always_build">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_always_build">[docs]</a>
    <span class="k">def</span> <span class="nf">set_always_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">always_build</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Node&#39;s always_build value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">always_build</span> <span class="o">=</span> <span class="n">always_build</span></div>


<div class="viewcode-block" id="Node.exists">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.exists">[docs]</a>
    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reports whether node exists.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_exists_map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_func_exists</span><span class="p">](</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.rexists">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.rexists">[docs]</a>
    <span class="k">def</span> <span class="nf">rexists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Does this node exist locally or in a repository?&quot;&quot;&quot;</span>
        <span class="c1"># There are no repositories by default:</span>
        <span class="k">return</span> <span class="n">_rexists_map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_func_rexists</span><span class="p">](</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.get_contents">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_contents">[docs]</a>
    <span class="k">def</span> <span class="nf">get_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetch the contents of the entry.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_get_contents_map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_func_get_contents</span><span class="p">](</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.missing">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.missing">[docs]</a>
    <span class="k">def</span> <span class="nf">missing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_derived</span><span class="p">()</span> <span class="ow">and</span> \
               <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">linked</span> <span class="ow">and</span> \
               <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rexists</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.remove">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.remove">[docs]</a>
    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove this Node:  no-op by default.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.add_dependency">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_dependency">[docs]</a>
    <span class="k">def</span> <span class="nf">add_dependency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depend</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds dependencies.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">depends</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends_set</span><span class="p">,</span> <span class="n">depend</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_List</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">UserError</span><span class="p">(</span><span class="s2">&quot;attempted to add a non-Node dependency to </span><span class="si">%s</span><span class="s2">:</span><span class="se">\n\t</span><span class="si">%s</span><span class="s2"> is a </span><span class="si">%s</span><span class="s2">, not a Node&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">s</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span></div>


<div class="viewcode-block" id="Node.add_prerequisite">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_prerequisite">[docs]</a>
    <span class="k">def</span> <span class="nf">add_prerequisite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prerequisite</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds prerequisites&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prerequisites</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prerequisites</span> <span class="o">=</span> <span class="n">UniqueList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prerequisites</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">prerequisite</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children_reset</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.add_ignore">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_ignore">[docs]</a>
    <span class="k">def</span> <span class="nf">add_ignore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depend</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds dependencies to ignore.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ignore</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_set</span><span class="p">,</span> <span class="n">depend</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_List</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">UserError</span><span class="p">(</span><span class="s2">&quot;attempted to ignore a non-Node dependency of </span><span class="si">%s</span><span class="s2">:</span><span class="se">\n\t</span><span class="si">%s</span><span class="s2"> is a </span><span class="si">%s</span><span class="s2">, not a Node&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">s</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span></div>


<div class="viewcode-block" id="Node.add_source">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_source">[docs]</a>
    <span class="k">def</span> <span class="nf">add_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds sources.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_specific_sources</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources_set</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">is_List</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Errors</span><span class="o">.</span><span class="n">UserError</span><span class="p">(</span><span class="s2">&quot;attempted to add a non-Node as source of </span><span class="si">%s</span><span class="s2">:</span><span class="se">\n\t</span><span class="si">%s</span><span class="s2"> is a </span><span class="si">%s</span><span class="s2">, not a Node&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">s</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span></div>


<div class="viewcode-block" id="Node._add_child">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node._add_child">[docs]</a>
    <span class="k">def</span> <span class="nf">_add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="nb">set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="n">child</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds &#39;child&#39; to &#39;collection&#39;, first checking &#39;set&#39; to see if it&#39;s</span>
<span class="sd">        already present.&quot;&quot;&quot;</span>
        <span class="n">added</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">child</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">:</span>
                <span class="nb">set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="n">added</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">added</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_children_reset</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.set_specific_source">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_specific_source">[docs]</a>
    <span class="k">def</span> <span class="nf">set_specific_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_specific_sources</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Node.add_wkid">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.add_wkid">[docs]</a>
    <span class="k">def</span> <span class="nf">add_wkid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wkid</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a node to the list of kids waiting to be evaluated&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wkids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wkids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wkid</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node._children_reset">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node._children_reset">[docs]</a>
    <span class="k">def</span> <span class="nf">_children_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_memoized_values</span><span class="p">()</span>
        <span class="c1"># We need to let the Executor clear out any calculated</span>
        <span class="c1"># build info that it&#39;s cached so we can re-calculate it.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executor_cleanup</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node._children_get">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node._children_get">[docs]</a>
    <span class="nd">@SCons</span><span class="o">.</span><span class="n">Memoize</span><span class="o">.</span><span class="n">CountMethodCall</span>
    <span class="k">def</span> <span class="nf">_children_get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_memo</span><span class="p">[</span><span class="s1">&#39;_children_get&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># The return list may contain duplicate Nodes, especially in</span>
        <span class="c1"># source trees where there are a lot of repeated #includes</span>
        <span class="c1"># of a tangle of .h files.  Profiling shows, however, that</span>
        <span class="c1"># eliminating the duplicates with a brute-force approach that</span>
        <span class="c1"># preserves the order (that is, something like:</span>
        <span class="c1">#</span>
        <span class="c1">#       u = []</span>
        <span class="c1">#       for n in list:</span>
        <span class="c1">#           if n not in u:</span>
        <span class="c1">#               u.append(n)&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># takes more cycles than just letting the underlying methods</span>
        <span class="c1"># hand back cached values if a Node&#39;s information is requested</span>
        <span class="c1"># multiple times.  (Other methods of removing duplicates, like</span>
        <span class="c1"># using dictionary keys, lose the order, and the only ordered</span>
        <span class="c1"># dictionary patterns I found all ended up using &quot;not in&quot;</span>
        <span class="c1"># internally anyway...)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_set</span><span class="p">:</span>
            <span class="nb">iter</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="n">_f</span> <span class="k">for</span> <span class="n">_f</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span><span class="p">]</span> <span class="k">if</span> <span class="n">_f</span><span class="p">])</span>

            <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_set</span><span class="p">:</span>
                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">children</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_children</span><span class="p">(</span><span class="n">scan</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_memo</span><span class="p">[</span><span class="s1">&#39;_children_get&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">children</span>
        <span class="k">return</span> <span class="n">children</span></div>


<div class="viewcode-block" id="Node.all_children">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.all_children">[docs]</a>
    <span class="k">def</span> <span class="nf">all_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scan</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of all the node&#39;s direct children.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">scan</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>

        <span class="c1"># The return list may contain duplicate Nodes, especially in</span>
        <span class="c1"># source trees where there are a lot of repeated #includes</span>
        <span class="c1"># of a tangle of .h files.  Profiling shows, however, that</span>
        <span class="c1"># eliminating the duplicates with a brute-force approach that</span>
        <span class="c1"># preserves the order (that is, something like:</span>
        <span class="c1">#</span>
        <span class="c1">#       u = []</span>
        <span class="c1">#       for n in list:</span>
        <span class="c1">#           if n not in u:</span>
        <span class="c1">#               u.append(n)&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># takes more cycles than just letting the underlying methods</span>
        <span class="c1"># hand back cached values if a Node&#39;s information is requested</span>
        <span class="c1"># multiple times.  (Other methods of removing duplicates, like</span>
        <span class="c1"># using dictionary keys, lose the order, and the only ordered</span>
        <span class="c1"># dictionary patterns I found all ended up using &quot;not in&quot;</span>
        <span class="c1"># internally anyway...)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span><span class="n">_f</span> <span class="k">for</span> <span class="n">_f</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">depends</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">implicit</span><span class="p">]</span> <span class="k">if</span> <span class="n">_f</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Node.children">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.children">[docs]</a>
    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scan</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of the node&#39;s direct children, minus those</span>
<span class="sd">        that are ignored by this node.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">scan</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children_get</span><span class="p">()</span></div>


<div class="viewcode-block" id="Node.set_state">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.set_state">[docs]</a>
    <span class="k">def</span> <span class="nf">set_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span></div>


<div class="viewcode-block" id="Node.get_state">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_state">[docs]</a>
    <span class="k">def</span> <span class="nf">get_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span></div>


<div class="viewcode-block" id="Node.get_env">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_env">[docs]</a>
    <span class="k">def</span> <span class="nf">get_env</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Environment</span><span class="p">:</span>
        <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">env</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">SCons.Defaults</span>
            <span class="n">env</span> <span class="o">=</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Defaults</span><span class="o">.</span><span class="n">DefaultEnvironment</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">env</span></div>


<div class="viewcode-block" id="Node.Decider">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.Decider">[docs]</a>
    <span class="k">def</span> <span class="nf">Decider</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">NodeInfoBase</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">foundkey</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_decider_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">function</span><span class="p">:</span>
                <span class="n">foundkey</span> <span class="o">=</span> <span class="n">k</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">foundkey</span><span class="p">:</span>
            <span class="n">foundkey</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">_decider_map</span><span class="p">)</span>
            <span class="n">_decider_map</span><span class="p">[</span><span class="n">foundkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed_since_last_build</span> <span class="o">=</span> <span class="n">foundkey</span></div>


<div class="viewcode-block" id="Node.Tag">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.Tag">[docs]</a>
    <span class="k">def</span> <span class="nf">Tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Add a user-defined tag. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="Node.GetTag">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.GetTag">[docs]</a>
    <span class="k">def</span> <span class="nf">GetTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span>  <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return a user-defined tag. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.changed">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.changed">[docs]</a>
    <span class="k">def</span> <span class="nf">changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">allowcache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns if the node is up-to-date with respect to the BuildInfo</span>
<span class="sd">        stored last time it was built.  The default behavior is to compare</span>
<span class="sd">        it against our own previously stored BuildInfo, but the stored</span>
<span class="sd">        BuildInfo from another Node (typically one in a Repository)</span>
<span class="sd">        can be used instead.</span>

<span class="sd">        Note that we now *always* check every dependency.  We used to</span>
<span class="sd">        short-circuit the check by returning as soon as we detected</span>
<span class="sd">        any difference, but we now rely on checking every dependency</span>
<span class="sd">        to make sure that any necessary Node information (for example,</span>
<span class="sd">        the content signature of an #included .h file) is updated.</span>

<span class="sd">        The allowcache option was added for supporting the early</span>
<span class="sd">        release of the executor/builder structures, right after</span>
<span class="sd">        a File target was built. When set to true, the return</span>
<span class="sd">        value of this changed method gets cached for File nodes.</span>
<span class="sd">        Like this, the executor isn&#39;t needed any longer for subsequent</span>
<span class="sd">        calls to changed().</span>

<span class="sd">        @see: FS.File.changed(), FS.File.release_target_info()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">T</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="s1">&#39;changed(</span><span class="si">%s</span><span class="s1"> [</span><span class="si">%s</span><span class="s1">], </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">node</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="n">result</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">bi</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_stored_info</span><span class="p">()</span><span class="o">.</span><span class="n">binfo</span>
        <span class="n">then</span> <span class="o">=</span> <span class="n">bi</span><span class="o">.</span><span class="n">bsourcesigs</span> <span class="o">+</span> <span class="n">bi</span><span class="o">.</span><span class="n">bdependsigs</span> <span class="o">+</span> <span class="n">bi</span><span class="o">.</span><span class="n">bimplicitsigs</span>
        <span class="n">children</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">()</span>

        <span class="n">diff</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">children</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">then</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">diff</span><span class="p">:</span>
            <span class="c1"># The old and new dependency lists are different lengths.</span>
            <span class="c1"># This always indicates that the Node must be rebuilt.</span>
            <span class="c1"># We also extend the old dependency list with enough None</span>
            <span class="c1"># entries to equal the new dependency list, for the benefit</span>
            <span class="c1"># of the loop below that updates node information.</span>
            <span class="n">then</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">diff</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="s1">&#39;: old </span><span class="si">%s</span><span class="s1"> new </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">then</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">children</span><span class="p">)))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">child</span><span class="p">,</span> <span class="n">prev_ni</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="n">then</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">_decider_map</span><span class="p">[</span><span class="n">child</span><span class="o">.</span><span class="n">changed_since_last_build</span><span class="p">](</span><span class="n">child</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">prev_ni</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;: &#39;</span><span class="si">{</span><span class="n">child</span><span class="si">!s}</span><span class="s2">&#39; changed&quot;</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_builder</span><span class="p">():</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_executor</span><span class="p">()</span><span class="o">.</span><span class="n">get_contents</span><span class="p">()</span>
            <span class="n">newsig</span> <span class="o">=</span> <span class="n">hash_signature</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">bi</span><span class="o">.</span><span class="n">bactsig</span> <span class="o">!=</span> <span class="n">newsig</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="s1">&#39;: bactsig </span><span class="si">%s</span><span class="s1"> != newsig </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bi</span><span class="o">.</span><span class="n">bactsig</span><span class="p">,</span> <span class="n">newsig</span><span class="p">))</span>
                <span class="n">result</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="s1">&#39;: up to date&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">T</span><span class="p">:</span> <span class="n">Trace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Node.is_up_to_date">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.is_up_to_date">[docs]</a>
    <span class="k">def</span> <span class="nf">is_up_to_date</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default check for whether the Node is current: unknown Node</span>
<span class="sd">        subtypes are always out of date, so they will always get built.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Node.children_are_up_to_date">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.children_are_up_to_date">[docs]</a>
    <span class="k">def</span> <span class="nf">children_are_up_to_date</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Alternate check for whether the Node is current:  If all of</span>
<span class="sd">        our children were up-to-date, then this Node was up-to-date, too.</span>

<span class="sd">        The SCons.Node.Alias and SCons.Node.Python.Value subclasses</span>
<span class="sd">        rebind their current() method to this method.&quot;&quot;&quot;</span>
        <span class="c1"># Allow the children to calculate their signatures.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_binfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">always_build</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">kid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">kid</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">state</span> <span class="ow">or</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="n">state</span><span class="p">):</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">s</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">state</span> <span class="o">==</span> <span class="n">SCons</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">up_to_date</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.is_literal">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.is_literal">[docs]</a>
    <span class="k">def</span> <span class="nf">is_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Always pass the string representation of a Node to</span>
<span class="sd">        the command interpreter literally.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Node.render_include_tree">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.render_include_tree">[docs]</a>
    <span class="k">def</span> <span class="nf">render_include_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a text representation, suitable for displaying to the</span>
<span class="sd">        user, of the include tree for the sources of this node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_derived</span><span class="p">():</span>
            <span class="n">env</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_env</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">env</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sources</span><span class="p">:</span>
                    <span class="n">scanner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_source_scanner</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">scanner</span><span class="p">:</span>
                        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_build_scanner_path</span><span class="p">(</span><span class="n">scanner</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">env</span><span class="p">:</span> <span class="n">Environment</span> <span class="o">=</span> <span class="n">env</span><span class="p">,</span> <span class="n">scanner</span><span class="p">:</span> <span class="n">ScannerBase</span> <span class="o">=</span> <span class="n">scanner</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">get_found_includes</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">scanner</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">render_tree</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Node.get_abspath">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_abspath">[docs]</a>
    <span class="k">def</span> <span class="nf">get_abspath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return an absolute path to the Node.  This will return simply</span>
<span class="sd">        str(Node) by default, but for Node types that have a concept of</span>
<span class="sd">        relative path, this might return something different.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.for_signature">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.for_signature">[docs]</a>
    <span class="k">def</span> <span class="nf">for_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation of the Node that will always</span>
<span class="sd">        be the same for this particular Node, no matter what.  This</span>
<span class="sd">        is by contrast to the __str__() method, which might, for</span>
<span class="sd">        instance, return a relative path for a file Node.  The purpose</span>
<span class="sd">        of this method is to generate a value to be used in signature</span>
<span class="sd">        calculation for the command line used to build a target, and</span>
<span class="sd">        we use this method instead of str() to avoid unnecessary</span>
<span class="sd">        rebuilds.  This method does not need to return something that</span>
<span class="sd">        would actually work in a command line; it can return any kind of</span>
<span class="sd">        nonsense, so long as it does not change.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.get_string">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_string">[docs]</a>
    <span class="k">def</span> <span class="nf">get_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">for_signature</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This is a convenience function designed primarily to be</span>
<span class="sd">        used in command generators (i.e., CommandGeneratorActions or</span>
<span class="sd">        Environment variables that are callable), which are called</span>
<span class="sd">        with a for_signature argument that is nonzero if the command</span>
<span class="sd">        generator is being called to generate a signature for the</span>
<span class="sd">        command line, which determines if we should rebuild or not.</span>

<span class="sd">        Such command generators should use this method in preference</span>
<span class="sd">        to str(Node) when converting a Node to a string, passing</span>
<span class="sd">        in the for_signature parameter, such that we will call</span>
<span class="sd">        Node.for_signature() or str(Node) properly, depending on whether</span>
<span class="sd">        we are calculating a signature or actually constructing a</span>
<span class="sd">        command line.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">for_signature</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">for_signature</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Node.get_subst_proxy">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.get_subst_proxy">[docs]</a>
    <span class="k">def</span> <span class="nf">get_subst_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is expected to return an object that will function</span>
<span class="sd">        exactly like this Node, except that it implements any additional</span>
<span class="sd">        special features that we would like to be in effect for</span>
<span class="sd">        Environment variable substitution.  The principle use is that</span>
<span class="sd">        some Nodes would like to implement a __getattr__() method,</span>
<span class="sd">        but putting that in the Node type itself has a tendency to kill</span>
<span class="sd">        performance.  We instead put it in a proxy and return it from</span>
<span class="sd">        this method.  It is legal for this method to return self</span>
<span class="sd">        if no new functionality is needed for Environment substitution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Node.explain">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Node.explain">[docs]</a>
    <span class="k">def</span> <span class="nf">explain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">return</span> <span class="s2">&quot;building `</span><span class="si">%s</span><span class="s2">&#39; because it doesn&#39;t exist</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">always_build</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;rebuilding `</span><span class="si">%s</span><span class="s2">&#39; because AlwaysBuild() is specified</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span>

        <span class="n">old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stored_info</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">old</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">old</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">binfo</span>
        <span class="n">old</span><span class="o">.</span><span class="n">prepare_dependencies</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">old_bkids</span>    <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">bsources</span>    <span class="o">+</span> <span class="n">old</span><span class="o">.</span><span class="n">bdepends</span>    <span class="o">+</span> <span class="n">old</span><span class="o">.</span><span class="n">bimplicit</span>
            <span class="n">old_bkidsigs</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">bsourcesigs</span> <span class="o">+</span> <span class="n">old</span><span class="o">.</span><span class="n">bdependsigs</span> <span class="o">+</span> <span class="n">old</span><span class="o">.</span><span class="n">bimplicitsigs</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Cannot explain why `</span><span class="si">%s</span><span class="s2">&#39; is being rebuilt: No previous build information found</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span>

        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_binfo</span><span class="p">()</span>

        <span class="n">new_bkids</span>    <span class="o">=</span> <span class="n">new</span><span class="o">.</span><span class="n">bsources</span>    <span class="o">+</span> <span class="n">new</span><span class="o">.</span><span class="n">bdepends</span>    <span class="o">+</span> <span class="n">new</span><span class="o">.</span><span class="n">bimplicit</span>
        <span class="n">new_bkidsigs</span> <span class="o">=</span> <span class="n">new</span><span class="o">.</span><span class="n">bsourcesigs</span> <span class="o">+</span> <span class="n">new</span><span class="o">.</span><span class="n">bdependsigs</span> <span class="o">+</span> <span class="n">new</span><span class="o">.</span><span class="n">bimplicitsigs</span>

        <span class="n">osig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">old_bkids</span><span class="p">,</span> <span class="n">old_bkidsigs</span><span class="p">)))</span>
        <span class="n">nsig</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">new_bkids</span><span class="p">,</span> <span class="n">new_bkidsigs</span><span class="p">)))</span>

        <span class="c1"># The sources and dependencies we&#39;ll want to report are all stored</span>
        <span class="c1"># as relative paths to this target&#39;s directory, but we want to</span>
        <span class="c1"># report them relative to the top-level SConstruct directory,</span>
        <span class="c1"># so we only print them after running them through this lambda</span>
        <span class="c1"># to turn them into the right relative Node and then return</span>
        <span class="c1"># its string.</span>
        <span class="k">def</span> <span class="nf">stringify</span><span class="p">(</span> <span class="n">s</span><span class="p">,</span> <span class="n">E</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">Entry</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span> <span class="n">s</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">E</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">removed</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">old_bkids</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_bkids</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">removed</span><span class="p">:</span>
            <span class="n">removed</span> <span class="o">=</span> <span class="p">[</span><span class="n">stringify</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">removed</span><span class="p">]</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;`</span><span class="si">%s</span><span class="s2">&#39; is no longer a dependency</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">fmt</span> <span class="o">%</span> <span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">removed</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">new_bkids</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">old_bkids</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;`</span><span class="si">%s</span><span class="s2">&#39; is a new dependency</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">stringify</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">changed</span> <span class="o">=</span> <span class="n">_decider_map</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">changed_since_last_build</span><span class="p">](</span><span class="n">k</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">osig</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

                <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;`</span><span class="si">%s</span><span class="s2">&#39; changed</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">stringify</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">old_bkids</span> <span class="o">!=</span> <span class="n">new_bkids</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;the dependency order changed:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-&gt;Sources</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="ow">in</span> <span class="n">zip_longest</span><span class="p">(</span><span class="n">old</span><span class="o">.</span><span class="n">bsources</span><span class="p">,</span> <span class="n">new</span><span class="o">.</span><span class="n">bsources</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Old:</span><span class="si">%s</span><span class="se">\t</span><span class="s2">New:</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-&gt;Depends</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="ow">in</span> <span class="n">zip_longest</span><span class="p">(</span><span class="n">old</span><span class="o">.</span><span class="n">bdepends</span><span class="p">,</span> <span class="n">new</span><span class="o">.</span><span class="n">bdepends</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Old:</span><span class="si">%s</span><span class="se">\t</span><span class="s2">New:</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;-&gt;Implicit</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="ow">in</span> <span class="n">zip_longest</span><span class="p">(</span><span class="n">old</span><span class="o">.</span><span class="n">bimplicit</span><span class="p">,</span> <span class="n">new</span><span class="o">.</span><span class="n">bimplicit</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Old:</span><span class="si">%s</span><span class="se">\t</span><span class="s2">New:</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">fmt_with_title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">strlines</span><span class="p">):</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">strlines</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="p">(</span><span class="mi">15</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
                <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="mi">15</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">old</span><span class="o">.</span><span class="n">bactsig</span> <span class="o">!=</span> <span class="n">new</span><span class="o">.</span><span class="n">bactsig</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">old</span><span class="o">.</span><span class="n">bact</span> <span class="o">==</span> <span class="n">new</span><span class="o">.</span><span class="n">bact</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;the contents of the build action changed</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                 <span class="n">fmt_with_title</span><span class="p">(</span><span class="s1">&#39;action: &#39;</span><span class="p">,</span> <span class="n">new</span><span class="o">.</span><span class="n">bact</span><span class="p">))</span>

                    <span class="c1"># lines.append(&quot;the contents of the build action changed [%s] [%s]\n&quot;%(old.bactsig,new.bactsig) +</span>
                    <span class="c1">#              fmt_with_title(&#39;action: &#39;, new.bact))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;the build action changed:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                                 <span class="n">fmt_with_title</span><span class="p">(</span><span class="s1">&#39;old: &#39;</span><span class="p">,</span> <span class="n">old</span><span class="o">.</span><span class="n">bact</span><span class="p">)</span> <span class="o">+</span>
                                 <span class="n">fmt_with_title</span><span class="p">(</span><span class="s1">&#39;new: &#39;</span><span class="p">,</span> <span class="n">new</span><span class="o">.</span><span class="n">bact</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;rebuilding `</span><span class="si">%s</span><span class="s2">&#39; for unknown reasons</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span>

        <span class="n">preamble</span> <span class="o">=</span> <span class="s2">&quot;rebuilding `</span><span class="si">%s</span><span class="s2">&#39; because&quot;</span> <span class="o">%</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">preamble</span><span class="p">,</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">preamble</span><span class="p">]</span> <span class="o">+</span> <span class="n">lines</span>
            <span class="k">return</span> <span class="p">(</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="NodeList">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.NodeList">[docs]</a>
<span class="k">class</span> <span class="nc">NodeList</span><span class="p">(</span><span class="n">collections</span><span class="o">.</span><span class="n">UserList</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)))</span></div>


<div class="viewcode-block" id="get_children">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.get_children">[docs]</a>
<span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span> <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">()</span></div>

<div class="viewcode-block" id="ignore_cycle">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.ignore_cycle">[docs]</a>
<span class="k">def</span> <span class="nf">ignore_cycle</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">stack</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="k">pass</span></div>

<div class="viewcode-block" id="do_nothing">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.do_nothing">[docs]</a>
<span class="k">def</span> <span class="nf">do_nothing</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="k">pass</span></div>


<div class="viewcode-block" id="Walker">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Walker">[docs]</a>
<span class="k">class</span> <span class="nc">Walker</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An iterator for walking a Node tree.</span>

<span class="sd">    This is depth-first, children are visited before the parent.</span>
<span class="sd">    The Walker object can be initialized with any node, and</span>
<span class="sd">    returns the next node on the descent with each get_next() call.</span>
<span class="sd">    get the children of a node instead of calling &#39;children&#39;.</span>
<span class="sd">    &#39;cycle_func&#39; is an optional function that will be called</span>
<span class="sd">    when a cycle is detected.</span>

<span class="sd">    This class does not get caught in node cycles caused, for example,</span>
<span class="sd">    by C header file include loops.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
        <span class="n">kids_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]]</span> <span class="o">=</span> <span class="n">get_children</span><span class="p">,</span>
        <span class="n">cycle_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Node</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">ignore_cycle</span><span class="p">,</span>
        <span class="n">eval_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">do_nothing</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kids_func</span> <span class="o">=</span> <span class="n">kids_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle_func</span> <span class="o">=</span> <span class="n">cycle_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eval_func</span> <span class="o">=</span> <span class="n">eval_func</span>
        <span class="n">node</span><span class="o">.</span><span class="n">wkids</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">kids_func</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># used to efficiently detect and avoid cycles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Walker.get_next">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Walker.get_next">[docs]</a>
    <span class="k">def</span> <span class="nf">get_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the next node for this walk of the tree.</span>

<span class="sd">        This function is intentionally iterative, not recursive,</span>
<span class="sd">        to sidestep any issues of stack size limitations.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wkids</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wkids</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wkids</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wkids</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">cycle_func</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">node</span><span class="o">.</span><span class="n">wkids</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kids_func</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">node</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">:</span>
                        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">eval_func</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">node</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Walker.is_done">
<a class="viewcode-back" href="../../../SCons.Node/#SCons.Node.Walker.is_done">[docs]</a>
    <span class="k">def</span> <span class="nf">is_done</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span></div>
</div>



<span class="n">arg2nodes_lookups</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Local Variables:</span>
<span class="c1"># tab-width:4</span>
<span class="c1"># indent-tabs-mode:nil</span>
<span class="c1"># End:</span>
<span class="c1"># vim: set expandtab tabstop=4 shiftwidth=4:</span>
</pre></div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By SCons Project Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2022, SCons Project.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>