<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>27.2. Ninja Build Generator</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 4.6.0"><link rel="up" href="ch27.html" title="Chapter 27. Using SCons with other build tools"><link rel="prev" href="ch27.html" title="Chapter 27. Using SCons with other build tools"><link rel="next" href="ch28.html" title="Chapter 28. Troubleshooting"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">27.2. Ninja Build Generator</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch27.html">Prev</a> </td><th width="60%" align="center">Chapter 27. Using SCons with other build tools</th><td width="20%" align="right"> <a accesskey="n" href="ch28.html">Next</a></td></tr></table><hr></div><div class="section" title="27.2. Ninja Build Generator"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id6925"></a>27.2. Ninja Build Generator</h2></div></div></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                This is an experimental new feature.
                It is subject to change and/or removal without a depreciation cycle.
    </p><p>
            Loading the <a class="link" href="apc.html#t-ninja"><code class="literal">ninja</code></a> tool into SCons will make significant changes
            in SCons' normal functioning.
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        SCons will no longer execute any commands directly and will only create the <code class="filename">build.ninja</code> and
        run ninja.
            </p></li><li class="listitem"><p>
        Any targets specified on the command line will be passed along to <span class="application">ninja</span>
            </p></li></ul></div><p>
                To enable this feature you'll need to use one of the following:
    </p><pre class="screen">
# On the command line --experimental=ninja

# Or in your SConstruct
SetOption('experimental', 'ninja')
    </pre></div><p>
            Ninja is a small build system that tries to be fast
            by not making decisions. <span class="application">SCons</span> can at times be slow
            because it makes lots of decisions to carry out its goal
            of "correctness".  The two tools can be paired to benefit
            some build scenarios: by using the <a class="link" href="apc.html#t-ninja"><code class="literal">ninja</code></a> tool,
            <span class="application">SCons</span> can generate the build file <span class="application">ninja</span> uses (basically
            doing the decision-making ahead of time and recording that
            for <span class="application">ninja</span>), and can invoke <span class="application">ninja</span> to perform a build.
            For situations where relationships are not changing, such
            as edit/build/debug iterations, this works fine and should
            provide considerable speedups for more complex builds.
            The implication is if there are larger changes taking place,
            <span class="application">ninja</span> is not as appropriate - but you can always use <span class="application">SCons</span>
            to regenerate the build file.  You are NOT advised to use
            this for production builds.
        </p><p>
            To use the <a class="link" href="apc.html#t-ninja"><code class="literal">ninja</code></a> tool you'll need to first install the
            <span class="application">Python</span> <span class="application">ninja</span> package, as the tool depends on being able to do an
            <code class="systemitem">import</code> of the package.
            This can be done via:
        </p><pre class="screen">
# In a virtualenv, or "python" is the native executable:
python -m pip install ninja

# Windows using Python launcher:
py -m pip install ninja

# Anaconda:
conda install -c conda-forge ninja
        </pre><p>
            Reminder that like any non-default tool, you need to initialize it before use
            (e.g. <code class="code">env.Tool('ninja')</code>).
        </p><p>
            It is not expected that the <a class="link" href="apb.html#b-Ninja"><code class="function">Ninja</code></a> builder will work for all builds at this point. It is still under active
            development. If you find that your build doesn't work with <span class="application">ninja</span> please bring this to the <a class="ulink" href="https://pairlist4.pair.net/mailman/listinfo/scons-users" target="_top">users mailing list</a>
            or <a class="ulink" href="https://discord.gg/bXVpWAy" target="_top">
            <code class="literal">#scons-help</code>
            </a> channel on our Discord server.
        </p><p>
            Specifically if your build has many (or even any) <span class="application">Python</span> function actions you may find that the <span class="application">ninja</span> build
            will be slower as it will run <span class="application">ninja</span>, which will then run SCons for each target created by a <span class="application">Python</span> action.
            To alleviate some of these, especially those <span class="application">Python</span> based actions built into SCons there is special logic to
            implement those actions via shell commands in the <span class="application">ninja</span> build file.
        </p><p>
            When <span class="application">ninja</span> runs the generated <span class="application">ninja</span> build file, <span class="application">ninja</span> will launch <span class="command"><strong>scons</strong></span> as a daemon and feed commands
            to that <span class="command"><strong>scons</strong></span> process which <span class="application">ninja</span> is unable to build directly.  This daemon will stay alive until
            explicitly killed, or it times out. The timeout is set by <a class="link" href="apa.html#cv-NINJA_SCONS_DAEMON_KEEP_ALIVE"><code class="envar">$NINJA_SCONS_DAEMON_KEEP_ALIVE</code></a> .
        </p><p>
            The daemon will be restarted if any <code class="filename">SConscript</code> file(s) change or the build changes in a way that <span class="application">ninja</span> determines
            it needs to regenerate the build.ninja file
        </p><p>See:</p><table border="0" summary="Simple list" class="simplelist"><tr><td>
            <a class="ulink" href="https://ninja-build.org/" target="_top">
                <em class="citetitle">Ninja Build System</em>
            </a>
            </td></tr><tr><td>
            <a class="ulink" href="https://ninja-build.org/manual.html#ref_ninja_file" target="_top">
                <em class="citetitle">Ninja File Format Specification</em>
            </a>
            </td></tr></table></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch27.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch27.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch28.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 27. Using SCons with other build tools </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 28. Troubleshooting</td></tr></table></div></body></html>
