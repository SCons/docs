<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Why SCons Duplicates Source Files in a Variant Directory Tree</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="SCons User Guide 1.3.1"
HREF="index.html"><LINK
REL="UP"
TITLE="Separating Source and Build Directories"
HREF="c3299.html"><LINK
REL="PREVIOUS"
TITLE="Separating Source and Build Directories"
HREF="c3299.html"><LINK
REL="NEXT"
TITLE="Telling SCons to Not Duplicate Source Files in the Variant Directory Tree"
HREF="x3358.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 1.3.1</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c3299.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 17. Separating Source and Build Directories</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x3358.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN3341"
>17.2. Why <SPAN
CLASS="application"
>SCons</SPAN
> Duplicates Source Files in a Variant Directory Tree</A
></H1
><P
>&#13;
    <SPAN
CLASS="application"
>SCons</SPAN
> duplicates source files in variant directory trees
    because it's the most straightforward way to guarantee a correct build
    <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>regardless of include-file directory paths,
    relative references between files,
    or tool support for putting files in different locations</I
></SPAN
>,
    and the <SPAN
CLASS="application"
>SCons</SPAN
> philosophy is to, by default,
    guarantee a correct build in all cases.

    </P
><P
>&#13;
    The most direct reason to duplicate source files
    in variant directories
    is simply that some tools (mostly older versions)
    are written to only build their output files
    in the same directory as the source files.
    In this case, the choices are either
    to build the output file in the source directory
    and move it to the variant directory,
    or to duplicate the source files in the variant directory.

    </P
><P
>&#13;
    Additionally,
    relative references between files
    can cause problems if we don't
    just duplicate the hierarchy of source files
    in the variant directory.
    You can see this at work in
    use of the C preprocessor <TT
CLASS="literal"
>#include</TT
>
    mechanism with double quotes, not angle brackets:

    </P
><PRE
CLASS="programlisting"
>&#13;      #include "file.h"
    </PRE
><P
>&#13;
    The <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>de facto</I
></SPAN
> standard behavior
    for most C compilers in this case
    is to first look in the same directory
    as the source file that contains the <TT
CLASS="literal"
>#include</TT
> line,
    then to look in the directories in the preprocessor search path.
    Add to this that the <SPAN
CLASS="application"
>SCons</SPAN
> implementation of
    support for code repositories
    (described below)
    means not all of the files
    will be found in the same directory hierarchy,
    and the simplest way to make sure
    that the right include file is found
    is to duplicate the source files into the variant directory,
    which provides a correct build
    regardless of the original location(s) of the source files.

    </P
><P
>&#13;
    Although source-file duplication guarantees a correct build
    even in these end-cases,
    it <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>can</I
></SPAN
> usually be safely disabled.
    The next section describes
    how you can disable the duplication of source files
    in the variant directory.

    </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c3299.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x3358.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Separating Source and Build Directories</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c3299.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Telling <SPAN
CLASS="application"
>SCons</SPAN
> to Not Duplicate Source Files in the Variant Directory Tree</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>