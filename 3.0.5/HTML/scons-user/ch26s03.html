<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>26.3. Building Java Archive (.jar) Files: the Jar Builder</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 3.0.5"><link rel="up" href="ch26.html" title="Chapter 26. Java Builds"><link rel="prev" href="ch26s02.html" title="26.2. How SCons Handles Java Dependencies"><link rel="next" href="ch26s04.html" title="26.4. Building C Header and Stub Files: the JavaH Builder"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.3. Building Java Archive (<code class="filename">.jar</code>) Files:  the <code class="function">Jar</code> Builder</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch26s02.html">Prev</a> </td><th width="60%" align="center">Chapter 26. Java Builds</th><td width="20%" align="right"> <a accesskey="n" href="ch26s04.html">Next</a></td></tr></table><hr></div><div class="section" title="26.3. Building Java Archive (.jar) Files: the Jar Builder"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm4596"></a>26.3. Building Java Archive (<code class="filename">.jar</code>) Files:  the <code class="function">Jar</code> Builder</h2></div></div></div><p>

    After building the class files,
    it's common to collect them into
    a Java archive (<code class="filename">.jar</code>) file,
    which you do by calling the <a class="link" href="apb.html#b-Jar"><code class="function">Jar</code></a> Builder method.
    If you want to just collect all of the
    class files within a subdirectory,
    you can just specify that subdirectory
    as the <code class="function">Jar</code> source:

    </p><pre class="programlisting">
Java(target = 'classes', source = 'src')
Jar(target = 'test.jar', source = 'classes')
      </pre><p>

    <span class="application">SCons</span> will then pass that directory
    to the <span class="application">jar</span> command,
    which will collect all of the underlying
    <code class="filename">.class</code> files:

    </p><pre class="screen">% <strong class="userinput"><code>scons -Q</code></strong>
javac -d classes -sourcepath src src/Example1.java src/Example2.java src/Example3.java
jar cf test.jar classes
</pre><p>

    If you want to keep all of the
    <code class="filename">.class</code> files
    for multiple programs in one location,
    and only archive some of them in
    each <code class="filename">.jar</code> file,
    you can pass the <code class="function">Jar</code> builder a
    list of files as its source.
    It's extremely simple to create multiple
    <code class="filename">.jar</code> files this way,
    using the lists of target class files created
    by calls to the <a class="link" href="apb.html#b-Java"><code class="function">Java</code></a> builder
    as sources to the various <code class="function">Jar</code> calls:

    </p><pre class="programlisting">
prog1_class_files = Java(target = 'classes', source = 'prog1')
prog2_class_files = Java(target = 'classes', source = 'prog2')
Jar(target = 'prog1.jar', source = prog1_class_files)
Jar(target = 'prog2.jar', source = prog2_class_files)
      </pre><p>

    This will then create
    <code class="filename">prog1.jar</code>
    and <code class="filename">prog2.jar</code>
    next to the subdirectories
    that contain their <code class="filename">.java</code> files:

    </p><pre class="screen">% <strong class="userinput"><code>scons -Q</code></strong>
javac -d classes -sourcepath prog1 prog1/Example1.java prog1/Example2.java
javac -d classes -sourcepath prog2 prog2/Example3.java prog2/Example4.java
jar cf prog1.jar -C classes Example1.class -C classes Example2.class
jar cf prog2.jar -C classes Example3.class -C classes Example4.class
</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch26s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch26.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch26s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">26.2. How <span class="application">SCons</span> Handles Java Dependencies </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 26.4. Building C Header and Stub Files:  the <code class="function">JavaH</code> Builder</td></tr></table></div></body></html>
