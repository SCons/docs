<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>21.3. Using scanners with Builders</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 3.0.5"><link rel="up" href="ch21.html" title="Chapter 21. Writing Scanners"><link rel="prev" href="ch21s02.html" title="21.2. Adding a search path to a scanner: FindPathDirs"><link rel="next" href="ch22.html" title="Chapter 22. Building From Code Repositories"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">21.3. Using scanners with Builders</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch21s02.html">Prev</a> </td><th width="60%" align="center">Chapter 21. Writing Scanners</th><td width="20%" align="right"> <a accesskey="n" href="ch22.html">Next</a></td></tr></table><hr></div><div class="section" title="21.3. Using scanners with Builders"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idm4070"></a>21.3. Using scanners with Builders</h2></div></div></div><p>

	One approach for the use of scanners is with builders.
    There are two optional parameters we can use with a builder
    <code class="literal">source_scanner</code> and <code class="literal">target_scanner</code>.

    </p><pre class="programlisting">

def kfile_scan(node, env, path, arg):
    contents = node.get_text_contents()
    return env.File(include_re.findall(contents))

kscan = Scanner(function = kfile_scan,
            skeys = ['.k'],
            path_function = FindPathDirs('KPATH'))

def build_function(target, source, env):
    # Code to build "target" from "source"
    return None

bld = Builder(action = build_function,
            suffix = '.foo',
            source_scanner = kscan
            src_suffix = '.input')
env = Environment(BUILDERS = {'Foo' : bld})
env.Foo('file')

      </pre><p>

    An emitter function can modify the list of sources or targets
    passed to the action function when the builder is triggered.

    </p><p>

    A scanner function will not affect the list of sources or targets
    seen by the builder during the build action. The scanner function
    will however affect if the builder should be rebuilt (if any of
    the files sourced by the scanner have changed for example).

    </p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch21s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch21.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch22.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">21.2. Adding a search path to a scanner: <code class="function">FindPathDirs</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 22. Building From Code Repositories</td></tr></table></div></body></html>
