<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Compiling Multiple Source Files</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="SCons User Guide 1.2.0"
HREF="index.html"><LINK
REL="UP"
TITLE="Less Simple Things to Do With Builds"
HREF="c438.html"><LINK
REL="PREVIOUS"
TITLE="Less Simple Things to Do With Builds"
HREF="c438.html"><LINK
REL="NEXT"
TITLE="Making a list of files with Glob"
HREF="x489.html"></HEAD
><BODY
CLASS="section"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 1.2.0</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c438.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 3. Less Simple Things to Do With Builds</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x489.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN467"
>3.2. Compiling Multiple Source Files</A
></H1
><P
>&#13;
    You've just seen how to configure <SPAN
CLASS="application"
>SCons</SPAN
>
    to compile a program from a single source file.
    It's more common, of course,
    that you'll need to build a program from
    many input source files, not just one.
    To do this, you need to put the
    source files in a Python list
    (enclosed in square brackets),
    like so:

    </P
><PRE
CLASS="programlisting"
>&#13;       Program(['prog.c', 'file1.c', 'file2.c'])
    </PRE
><P
>&#13;
    A build of the above example would look like:

    </P
><PRE
CLASS="screen"
>&#13;       % <KBD
CLASS="userinput"
>scons -Q</KBD
>
       cc -o file1.o -c file1.c
       cc -o file2.o -c file2.c
       cc -o prog.o -c prog.c
       cc -o prog prog.o file1.o file2.o
    </PRE
><P
>&#13;
    Notice that <SPAN
CLASS="application"
>SCons</SPAN
>
    deduces the output program name
    from the first source file specified
    in the list--that is,
    because the first source file was <TT
CLASS="filename"
>prog.c</TT
>,
    <SPAN
CLASS="application"
>SCons</SPAN
> will name the resulting program <TT
CLASS="filename"
>prog</TT
>
    (or <TT
CLASS="filename"
>prog.exe</TT
> on a Windows system).
    If you want to specify a different program name,
    then (as we've seen in the previous section)
    you slide the list of source files
    over to the right
    to make room for the output program file name.
    (<SPAN
CLASS="application"
>SCons</SPAN
> puts the output file name to the left
    of the source file names
    so that the order mimics that of an
    assignment statement:  "program = source files".)
    This makes our example:

    </P
><PRE
CLASS="programlisting"
>&#13;       Program('program', ['prog.c', 'file1.c', 'file2.c'])
    </PRE
><P
>&#13;
    On Linux, a build of this example would look like:

    </P
><PRE
CLASS="screen"
>&#13;       % <KBD
CLASS="userinput"
>scons -Q</KBD
>
       cc -o file1.o -c file1.c
       cc -o file2.o -c file2.c
       cc -o prog.o -c prog.c
       cc -o program prog.o file1.o file2.o
    </PRE
><P
>&#13;
    Or on Windows:

    </P
><PRE
CLASS="screen"
>&#13;       C:\&#62;<KBD
CLASS="userinput"
>scons -Q</KBD
>
       cl /Fofile1.obj /c file1.c /nologo
       cl /Fofile2.obj /c file2.c /nologo
       cl /Foprog.obj /c prog.c /nologo
       link /nologo /OUT:program.exe prog.obj file1.obj file2.obj
    </PRE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c438.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x489.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Less Simple Things to Do With Builds</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c438.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Making a list of files with <CODE
CLASS="function"
>Glob</CODE
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>