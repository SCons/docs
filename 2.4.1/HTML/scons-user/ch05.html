<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 5. Node Objects</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 2.4.1"><link rel="up" href="index.html" title="SCons 2.4.1"><link rel="prev" href="ch04s03.html" title="4.3. Finding Libraries: the $LIBPATH Construction Variable"><link rel="next" href="ch05s02.html" title="5.2. Explicitly Creating File and Directory Nodes"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. Node Objects</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 5. Node Objects"><div class="titlepage"><div><div><h2 class="title"><a name="chap-nodes"></a>Chapter 5. Node Objects</h2></div></div></div><p>

  Internally, <span class="application">SCons</span> represents all of the files
  and directories it knows about as <code class="literal">Nodes</code>.
  These internal objects
  (not object <span class="emphasis"><em>files</em></span>)
  can be used in a variety of ways
  to make your <code class="filename">SConscript</code>
  files portable and easy to read.

  </p><div class="section" title="5.1. Builder Methods Return Lists of Target Nodes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp1399621508"></a>5.1. Builder Methods Return Lists of Target Nodes</h2></div></div></div><p>

    All builder methods return a list of
    <code class="classname">Node</code> objects that identify the
    target file or files that will be built.
    These returned <code class="literal">Nodes</code> can be passed
    as arguments to other builder methods.

    </p><p>

    For example, suppose that we want to build
    the two object files that make up a program with different options.
    This would mean calling the <a class="link" href="apb.html#b-Object"><code class="function">Object</code></a>
    builder once for each object file,
    specifying the desired options:

    </p><pre class="programlisting">
Object('hello.c', CCFLAGS='-DHELLO')
Object('goodbye.c', CCFLAGS='-DGOODBYE')
    </pre><p>

    One way to combine these object files
    into the resulting program
    would be to call the <a class="link" href="apb.html#b-Program"><code class="function">Program</code></a>
    builder with the names of the object files
    listed as sources:

    </p><pre class="programlisting">
Object('hello.c', CCFLAGS='-DHELLO')
Object('goodbye.c', CCFLAGS='-DGOODBYE')
Program(['hello.o', 'goodbye.o'])
    </pre><p>

    The problem with specifying the names as strings
    is that our <code class="filename">SConstruct</code> file is no longer portable
    across operating systems.
    It won't, for example, work on Windows
    because the object files there would be
    named <code class="filename">hello.obj</code> and <code class="filename">goodbye.obj</code>,
    not <code class="filename">hello.o</code> and <code class="filename">goodbye.o</code>.

    </p><p>

    A better solution is to assign the lists of targets
    returned by the calls to the <code class="function">Object</code> builder to variables,
    which we can then concatenate in our
    call to the <code class="function">Program</code> builder:

    </p><pre class="programlisting">
hello_list = Object('hello.c', CCFLAGS='-DHELLO')
goodbye_list = Object('goodbye.c', CCFLAGS='-DGOODBYE')
Program(hello_list + goodbye_list)
      </pre><p>

    This makes our <code class="filename">SConstruct</code> file portable again,
    the build output on Linux looking like:

    </p><pre class="screen">% <strong class="userinput"><code>scons -Q</code></strong>
cc -o goodbye.o -c -DGOODBYE goodbye.c
cc -o hello.o -c -DHELLO hello.c
cc -o hello hello.o goodbye.o
</pre><p>

    And on Windows:

    </p><pre class="screen">C:\&gt;<strong class="userinput"><code>scons -Q</code></strong>
cl /Fogoodbye.obj /c goodbye.c -DGOODBYE
cl /Fohello.obj /c hello.c -DHELLO
link /nologo /OUT:hello.exe hello.obj goodbye.obj
embedManifestExeCheck(target, source, env)
</pre><p>

    We'll see examples of using the list of nodes
    returned by builder methods throughout
    the rest of this guide.

    </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.3. Finding Libraries:  the <code class="envar">$LIBPATH</code> Construction Variable </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5.2. Explicitly Creating File and Directory Nodes</td></tr></table></div></body></html>
