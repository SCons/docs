<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 7. Environments</title><link rel="stylesheet" type="text/css" href="scons.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="SCons 3.0.2"><link rel="up" href="index.html" title="SCons 3.0.2"><link rel="prev" href="ch06s09.html" title="6.9. The AlwaysBuild Function"><link rel="next" href="ch07s02.html" title="7.2. Construction Environments"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 7. Environments</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06s09.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch07s02.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 7. Environments"><div class="titlepage"><div><div><h2 class="title"><a name="chap-environments"></a>Chapter 7. Environments</h2></div></div></div><p>

  An <code class="literal">environment</code>
  is a collection of values that
  can affect how a program executes.
  <span class="application">SCons</span> distinguishes between three
  different types of environments
  that can affect the behavior of <span class="application">SCons</span> itself
  (subject to the configuration in the <code class="filename">SConscript</code> files),
  as well as the compilers and other tools it executes:

  </p><div class="variablelist"><dl><dt><span class="term">External Environment</span></dt><dd><p>

    The <code class="literal">external environment</code>
    is the set of variables in the user's environment
    at the time the user runs <span class="application">SCons</span>.
    These variables are available within the <code class="filename">SConscript</code> files
    through the Python <code class="literal">os.environ</code> dictionary.
    See <a class="xref" href="ch07.html#sect-external-environments" title="7.1. Using Values From the External Environment">Section 7.1, &#8220;Using Values From the External Environment&#8221;</a>, below.

    </p></dd><dt><span class="term"><code class="literal">Construction Environment</code></span></dt><dd><p>

    A <code class="literal">construction environment</code>
    is a distinct object created within
    a <code class="filename">SConscript</code> file and
    which contains values that
    affect how <span class="application">SCons</span> decides
    what action to use to build a target,
    and even to define which targets
    should be built from which sources.
    One of the most powerful features of <span class="application">SCons</span>
    is the ability to create multiple <code class="literal">construction environments</code>,
    including the ability to clone a new, customized
    <code class="literal">construction environment</code> from an existing <code class="literal">construction environment</code>.
    See <a class="xref" href="ch07s02.html" title="7.2. Construction Environments">Section 7.2, &#8220;Construction Environments&#8221;</a>, below.

    </p></dd><dt><span class="term">Execution Environment</span></dt><dd><p>

    An <code class="literal">execution environment</code>
    is the values that <span class="application">SCons</span> sets
    when executing an external
    command (such as a compiler or linker)
    to build one or more targets.
    Note that this is not the same as
    the <code class="literal">external environment</code>
    (see above).
    See <a class="xref" href="ch07s03.html" title="7.3. Controlling the Execution Environment for Issued Commands">Section 7.3, &#8220;Controlling the Execution Environment for Issued Commands&#8221;</a>, below.

    </p></dd></dl></div><p>

  Unlike <span class="application">Make</span>,  <span class="application">SCons</span> does not automatically
  copy or import values between different environments
  (with the exception of explicit clones of <code class="literal">construction environments</code>,
  which inherit values from their parent).
  This is a deliberate design choice
  to make sure that builds are,
  by default, repeatable regardless of
  the values in the user's external environment.
  This avoids a whole class of problems with builds
  where a developer's local build works
  because a custom variable setting
  causes a different compiler or build option to be used,
  but the checked-in change breaks the official build
  because it uses different environment variable settings.

  </p><p>

  Note that the <code class="filename">SConscript</code> writer can
  easily arrange for variables to be
  copied or imported between environments,
  and this is often very useful
  (or even downright necessary)
  to make it easy for developers
  to customize the build in appropriate ways.
  The point is <span class="emphasis"><em>not</em></span>
  that copying variables between different environments
  is evil and must always be avoided.
  Instead, it should be up to the
  implementer of the build system
  to make conscious choices
  about how and when to import
  a variable from one environment to another,
  making informed decisions about
  striking the right balance
  between making the build
  repeatable on the one hand
  and convenient to use on the other.

  </p><div class="section" title="7.1. Using Values From the External Environment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sect-external-environments"></a>7.1. Using Values From the External Environment</h2></div></div></div><p>

  The <code class="literal">external environment</code>
  variable settings that
  the user has in force
  when executing <span class="application">SCons</span>
  are available through the normal Python
  <code class="envar">os.environ</code>
  dictionary.
  This means that you must add an
  <code class="literal">import os</code> statement
  to any <code class="filename">SConscript</code> file
  in which you want to use
  values from the user's external environment.

  </p><pre class="programlisting">
import os
     </pre><p>

  More usefully, you can use the
  <code class="envar">os.environ</code>
  dictionary in your <code class="filename">SConscript</code>
  files to initialize <code class="literal">construction environments</code>
  with values from the user's external environment.
  See the next section,
  <a class="xref" href="ch07s02.html" title="7.2. Construction Environments">Section 7.2, &#8220;Construction Environments&#8221;</a>,
  for information on how to do this.

  </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06s09.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch07s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.9. The <code class="function">AlwaysBuild</code> Function </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7.2. Construction Environments</td></tr></table></div></body></html>
