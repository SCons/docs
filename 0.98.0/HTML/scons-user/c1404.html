<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Controlling the External Environment Used to Execute Build Commands</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="SCons User Guide 0.98.0"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="Modifying a Construction Environment"
HREF="x1331.html"><LINK
REL="NEXT"
TITLE="Controlling a Build From the Command Line"
HREF="c1454.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.98.0</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1331.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c1454.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="chap-ENV"
></A
>Chapter 8. Controlling the External Environment Used to Execute Build Commands</H1
><P
>&#13;
    When <SPAN
CLASS="application"
>SCons</SPAN
> builds a target file,
    it does not execute the commands with
    the same external environment
    that you used to execute <SPAN
CLASS="application"
>SCons</SPAN
>.
    Instead, it uses the dictionary
    stored in the <A
HREF="a3578.html#cv-ENV"
><CODE
CLASS="envar"
>$ENV</CODE
></A
> construction variable
    as the external environment
    for executing commands.

  </P
><P
>&#13;
    The most important ramification of this behavior
    is that the <CODE
CLASS="varname"
>PATH</CODE
> environment variable,
    which controls where the operating system
    will look for commands and utilities,
    is not the same as in the external environment
    from which you called <SPAN
CLASS="application"
>SCons</SPAN
>.
    This means that <SPAN
CLASS="application"
>SCons</SPAN
> will not, by default,
    necessarily find all of the tools
    that you can execute from the command line.

  </P
><P
>&#13;
    The default value of the <CODE
CLASS="varname"
>PATH</CODE
> environment variable
    on a POSIX system
    is <TT
CLASS="literal"
>/usr/local/bin:/bin:/usr/bin</TT
>.
    The default value of the <CODE
CLASS="varname"
>PATH</CODE
> environment variable
    on a Windows system comes from the Windows registry
    value for the command interpreter.
    If you want to execute any commands--compilers, linkers, etc.--that
    are not in these default locations,
    you need to set the <CODE
CLASS="varname"
>PATH</CODE
> value
    in the <CODE
CLASS="envar"
>$ENV</CODE
> dictionary
    in your construction environment.

  </P
><P
>&#13;
    The simplest way to do this is to initialize explicitly
    the value when you create the construction environment;
    this is one way to do that:

  </P
><PRE
CLASS="programlisting"
>&#13;    path = ['/usr/local/bin', '/bin', '/usr/bin']
    env = Environment(ENV = {'PATH' : path})
  </PRE
><P
>&#13;
  Assign a dictionary to the <CODE
CLASS="envar"
>$ENV</CODE
>
  construction variable in this way
  completely resets the external environment
  so that the only variable that will be
  set when external commands are executed
  will be the <CODE
CLASS="varname"
>PATH</CODE
> value.
  If you want to use the rest of
  the values in <CODE
CLASS="envar"
>$ENV</CODE
> and only
  set the value of <CODE
CLASS="varname"
>PATH</CODE
>,
  the most straightforward way is probably:

  </P
><PRE
CLASS="programlisting"
>&#13;    env['ENV']['PATH'] = ['/usr/local/bin', '/bin', '/usr/bin']
  </PRE
><P
>&#13;
  Note that <SPAN
CLASS="application"
>SCons</SPAN
> does allow you to define
  the directories in the <CODE
CLASS="varname"
>PATH</CODE
> in a string,
  separated by the pathname-separator character
  for your system (':' on POSIX systems, ';' on Windows):

  </P
><PRE
CLASS="programlisting"
>&#13;    env['ENV']['PATH'] = '/usr/local/bin:/bin:/usr/bin'
  </PRE
><P
>&#13;
  But doing so makes your <TT
CLASS="filename"
>SConscript</TT
> file less portable,
  (although in this case that may not be a huge concern
  since the directories you list are likley system-specific, anyway).

  </P
><DIV
CLASS="section"
><H1
CLASS="section"
><A
NAME="AEN1435"
>8.1. Propagating <CODE
CLASS="varname"
>PATH</CODE
> From the External Environment</A
></H1
><P
>&#13;
    You may want to propagate the external <CODE
CLASS="varname"
>PATH</CODE
>
    to the execution environment for commands.
    You do this by initializing the <CODE
CLASS="varname"
>PATH</CODE
>
    variable with the <CODE
CLASS="varname"
>PATH</CODE
> value from
    the <TT
CLASS="literal"
>os.environ</TT
>
    dictionary,
    which is Python's way of letting you
    get at the external environment:

    </P
><PRE
CLASS="programlisting"
>&#13;      import os
      env = Environment(ENV = {'PATH' : os.environ['PATH']})
    </PRE
><P
>&#13;
    Alternatively, you may find it easier
    to just propagate the entire external
    environment to the execution environment
    for commands.
    This is simpler to code than explicity
    selecting the <CODE
CLASS="varname"
>PATH</CODE
> value:

    </P
><PRE
CLASS="programlisting"
>&#13;      import os
      env = Environment(ENV = os.environ)
    </PRE
><P
>&#13;
    Either of these will guarantee that
    <SPAN
CLASS="application"
>SCons</SPAN
> will be able to execute
    any command that you can execute from the command line.
    The drawback is that the build can behave
    differently if it's run by people with
    different <CODE
CLASS="varname"
>PATH</CODE
> values in their environment--for example,
    if both the <TT
CLASS="literal"
>/bin</TT
> and
    <TT
CLASS="literal"
>/usr/local/bin</TT
> directories
    have different <SPAN
CLASS="application"
>cc</SPAN
> commands,
    then which one will be used to compile programs
    will depend on which directory is listed
    first in the user's <CODE
CLASS="varname"
>PATH</CODE
> variable.

    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1331.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c1454.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Modifying a <TT
CLASS="literal"
>Construction Environment</TT
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Controlling a Build From the Command Line</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>